<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mon Parcours Pro - Auto-positionnement</title>
  
  <!-- SDKs (Mocked if not present for standalone testing) -->
  <script src="/_sdk/element_sdk.js" onerror="window.elementSdkMissing=true"></script>
  <script src="/_sdk/data_sdk.js" onerror="window.dataSdkMissing=true"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #E31E52;
      --secondary: #FFD93D;
      --accent: #40E0D0;
      --bg-gradient: linear-gradient(135deg, #FFF6F8 0%, #FFFFFF 100%);
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-gradient);
      color: #2D3748;
      -webkit-tap-highlight-color: transparent;
      overflow-x: hidden;
    }

    h1, h2, h3, .font-display {
      font-family: 'Fredoka', sans-serif;
    }

    /* Background blobs */
    .blob {
      position: fixed;
      filter: blur(40px);
      z-index: 0;
      opacity: 0.6;
      animation: float 10s infinite ease-in-out;
    }
    .blob-1 { top: -10%; right: -10%; width: 300px; height: 300px; background: #FFD93D; animation-delay: 0s; }
    .blob-2 { bottom: -10%; left: -10%; width: 250px; height: 250px; background: #40E0D0; animation-delay: 2s; }
    .blob-3 { top: 40%; left: 20%; width: 150px; height: 150px; background: #E31E52; opacity: 0.1; animation-delay: 4s; }

    @keyframes float {
      0% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(20px, -30px) scale(1.1); }
      66% { transform: translate(-10px, 20px) scale(0.9); }
      100% { transform: translate(0, 0) scale(1); }
    }

    /* Card & Interface */
    .glass-panel {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.05);
    }

    /* Progress Bar */
    .progress-container {
      background: #EDF2F7;
      border-radius: 999px;
      overflow: hidden;
      height: 16px;
      position: relative;
    }
    .progress-fill {
      background: linear-gradient(90deg, #E31E52, #FFD93D);
      height: 100%;
      border-radius: 999px;
      transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
    }
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.2) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        transparent 75%,
        transparent
      );
      background-size: 20px 20px;
      animation: moveStripe 1s linear infinite;
    }
    @keyframes moveStripe {
      0% { background-position: 0 0; }
      100% { background-position: 20px 20px; }
    }

    /* Option Buttons - Clickability & Gamification */
    .option-card {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid transparent;
      transform-origin: center;
      cursor: pointer;
    }
    .option-card:active {
      transform: scale(0.96);
    }
    .option-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
      border-color: #E2E8F0;
    }
    .option-card.selected {
      background: #F0FDFA; /* Teal-50 */
      border-color: #40E0D0;
      box-shadow: 0 0 0 4px rgba(64, 224, 208, 0.2);
    }
    
    /* Animations */
    .slide-in-right { animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
    .slide-in-left { animation: slideInLeft 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
    .fade-in { animation: fadeIn 0.5s ease-out; }
    .pop-in { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Level Up Overlay */
    .level-up-overlay {
      position: absolute;
      inset: 0;
      background: rgba(255,255,255,0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .level-up-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    /* Mobile specific adjustments */
    @media (max-width: 640px) {
      .option-card {
        padding: 1rem;
      }
      .question-text {
        font-size: 1.25rem;
      }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 relative">

  <!-- Background Elements -->
  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>
  <div class="blob blob-3"></div>

  <!-- Main App Container -->
  <div class="w-full max-w-2xl relative z-10">
    
    <!-- Header / Logo Area -->
    <div class="text-center mb-6 fade-in">
      <div class="inline-block bg-white p-2 rounded-full shadow-sm mb-2">
        <!-- Placeholder for Logo -->
        <div class="h-10 w-10 bg-gradient-to-br from-pink-500 to-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-xl">
          MP
        </div>
      </div>
      <h1 class="text-xl font-bold text-gray-700 font-display">Mon Parcours Pro</h1>
    </div>

    <!-- Main Card -->
    <div class="glass-panel rounded-3xl p-6 md:p-10 shadow-xl relative overflow-hidden min-h-[500px] flex flex-col transition-all duration-300" id="mainCard">
      
      <!-- WELCOME SCREEN -->
      <div id="welcomeScreen" class="flex flex-col items-center justify-center h-full text-center space-y-8 py-8 fade-in">
        <div class="text-6xl animate-bounce">ğŸ‘‹</div>
        <div class="space-y-4">
          <h1 id="welcomeTitle" class="text-3xl md:text-4xl font-extrabold text-pink-600 font-display leading-tight">
            PrÃªt Ã  dÃ©couvrir<br>ton profil ?
          </h1>
          <p class="text-gray-600 text-lg max-w-md mx-auto leading-relaxed">
            Pas de jugement, juste 5 minutes pour faire le point sur ta situation et dÃ©couvrir tes super-pouvoirs !
          </p>
        </div>
        
        <div class="grid grid-cols-2 gap-4 w-full max-w-sm mt-4">
            <div class="bg-blue-50 p-3 rounded-2xl text-sm font-semibold text-blue-600">ğŸ¯ 50 Questions</div>
            <div class="bg-yellow-50 p-3 rounded-2xl text-sm font-semibold text-yellow-600">ğŸ† 5 Niveaux</div>
        </div>

        <button id="startBtn" class="bg-gradient-to-r from-pink-600 to-pink-500 text-white font-bold text-xl py-4 px-10 rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 w-full max-w-xs mt-4">
          C'est parti ! ğŸš€
        </button>
      </div>

      <!-- QUIZ SCREEN -->
      <div id="quizScreen" class="hidden flex flex-col h-full">
        <!-- Progress Header -->
        <div class="mb-8">
          <div class="flex justify-between items-end mb-2">
            <span class="text-sm font-bold text-pink-600 uppercase tracking-wider" id="levelIndicator">Niveau 1/5</span>
            <span class="text-xs font-semibold text-gray-400" id="progressText">0%</span>
          </div>
          <div class="progress-container shadow-inner">
            <div id="progressFill" class="progress-fill w-0"></div>
          </div>
        </div>

        <!-- Question Area -->
        <div class="flex-grow flex flex-col justify-center">
          <div id="questionContainer" class="slide-in-right">
            <div class="inline-block bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-bold mb-4 animate-pulse">
              Question <span id="qIndex">1</span>/50
            </div>
            <h2 id="questionText" class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 font-display leading-snug">
              <!-- Question Text Here -->
            </h2>
            
            <div id="optionsGrid" class="grid grid-cols-1 gap-3">
              <!-- Options injected here -->
            </div>
          </div>
        </div>

        <!-- Navigation -->
        <div class="mt-8 flex justify-between items-center pt-4 border-t border-gray-100">
          <button id="prevBtn" class="text-gray-400 hover:text-gray-600 font-semibold text-sm py-2 px-4 transition-colors hidden">
            â† Retour
          </button>
          <div class="flex-grow"></div> 
          <!-- Next button is mostly automatic, but we keep it for accessibility or specific flows -->
        </div>

        <!-- Level Up Overlay -->
        <div id="levelUpOverlay" class="level-up-overlay rounded-3xl text-center p-8">
          <div class="text-6xl mb-4 animate-bounce">ğŸ‰</div>
          <h2 class="text-3xl font-bold text-pink-600 mb-2 font-display">Niveau ValidÃ© !</h2>
          <p class="text-gray-600 text-lg mb-6" id="levelUpMsg">Continue comme Ã§a, tu gÃ¨res !</p>
          <button id="nextLevelBtn" class="bg-accent text-teal-900 font-bold py-3 px-8 rounded-full shadow-md hover:bg-teal-300 transition-colors">
            Niveau Suivant â†’
          </button>
        </div>
      </div>

      <!-- LOADING SCREEN -->
      <div id="loadingScreen" class="hidden absolute inset-0 bg-white/90 z-50 flex flex-col items-center justify-center rounded-3xl">
        <div class="w-16 h-16 border-4 border-pink-200 border-t-pink-600 rounded-full animate-spin mb-4"></div>
        <p class="text-lg font-semibold text-gray-600 animate-pulse">Analyse de tes super-pouvoirs...</p>
      </div>

      <!-- RESULTS SCREEN -->
      <div id="resultsScreen" class="hidden fade-in">
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">ğŸ†</div>
            <h2 id="profileTitle" class="text-3xl font-bold text-gray-800 font-display mb-2">Ton Profil</h2>
            <p id="profileSubtitle" class="text-xl text-pink-600 font-medium"></p>
        </div>

        <!-- Results Scrollable Area -->
        <div id="resultsContent" class="space-y-6 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar">
            <!-- Dynamic Content -->
        </div>

        <div class="mt-6 pt-6 border-t border-gray-100">
            <button id="restartBtn" class="w-full bg-gray-100 text-gray-600 font-bold py-4 rounded-xl hover:bg-gray-200 transition-colors flex items-center justify-center gap-2">
                <span>ğŸ”„</span> Recommencer le test
            </button>
        </div>
      </div>

    </div>
    
    <!-- Footer -->
    <div class="text-center mt-6 text-xs text-gray-400">
      <p>Outil d'auto-positionnement â€¢ Mission Locale</p>
    </div>
  </div>

  <!-- Confetti Canvas -->
  <canvas id="confettiCanvas" class="fixed inset-0 pointer-events-none z-50"></canvas>

  <script>
    // --- MOCK SDKs for Standalone Preview ---
    // This ensures the tool works even without the parent environment
    if (typeof window.dataSdk === 'undefined' || window.dataSdkMissing) {
        window.dataSdk = {
            init: async () => ({ isOk: true }),
            create: async (data) => {
                console.log("Data saved locally:", data);
                return { isOk: true };
            }
        };
    }
    if (typeof window.elementSdk === 'undefined' || window.elementSdkMissing) {
        window.elementSdk = {
            init: (config) => console.log("Element SDK Init", config)
        };
    }

    // --- APP DATA ---
    // Grouping questions for "Levels"
    // Level 1: Ã‰tat d'esprit (1-10)
    // Level 2: CompÃ©tences & Avenir (11-20)
    // Level 3: Bien-Ãªtre & SantÃ© (21-30)
    // Level 4: Savoirs & Autonomie (31-40)
    // Level 5: Projection (41-50)
    
    const questions = [
      // NIVEAU 1 : Ã‰TAT D'ESPRIT
      { id: 1, text: "Comment te sens-tu en ce moment dans ta vie ?", emoji: "ğŸ’­", options: [{ emoji: "ğŸ˜Š", text: "PlutÃ´t bien, je suis sereinÂ·e", value: "good" }, { emoji: "ğŸ˜", text: "Ã‡a va, ni bien ni mal", value: "okay" }, { emoji: "ğŸ˜•", text: "Un peu perduÂ·e ou stressÃ©Â·e", value: "lost" }, { emoji: "ğŸ˜”", text: "Pas trÃ¨s bien en ce moment", value: "difficult" }] },
      { id: 2, text: "Qu'est-ce qui te prÃ©occupe le plus actuellement ?", emoji: "ğŸ¤”", options: [{ emoji: "ğŸ’°", text: "Ma situation financiÃ¨re", value: "money" }, { emoji: "ğŸ¯", text: "Mon avenir professionnel", value: "future" }, { emoji: "ğŸ ", text: "Mon logement / famille", value: "housing" }, { emoji: "ğŸ’š", text: "Ma santÃ© / bien-Ãªtre", value: "health" }, { emoji: "âœ¨", text: "Rien de particulier", value: "nothing" }] },
      { id: 3, text: "Arrives-tu Ã  te lever le matin avec un but ?", emoji: "ğŸŒ…", options: [{ emoji: "âœ…", text: "Oui, j'ai des choses prÃ©vues", value: "yes_planned" }, { emoji: "ğŸ¤·", text: "Parfois, Ã§a dÃ©pend", value: "sometimes" }, { emoji: "ğŸ˜´", text: "Non, routine monotone", value: "no_routine" }, { emoji: "ğŸ˜", text: "C'est dur de me lever", value: "difficult" }] },
      { id: 4, text: "As-tu des personnes sur qui compter ?", emoji: "ğŸ‘¥", options: [{ emoji: "â¤ï¸", text: "Oui, soutien proche", value: "strong_support" }, { emoji: "ğŸ‘", text: "Oui, quelques personnes", value: "some_support" }, { emoji: "ğŸ¤·", text: "Pas vraiment", value: "little_support" }, { emoji: "ğŸ˜”", text: "Non, je me sens isolÃ©Â·e", value: "isolated" }] },
      { id: 5, text: "Rencontrer de nouvelles personnes, c'est...", emoji: "ğŸ¤", options: [{ emoji: "ğŸ˜Š", text: "Facile, j'aime Ã§a", value: "comfortable" }, { emoji: "ğŸ˜", text: "Ã‡a dÃ©pend du moment", value: "depends" }, { emoji: "ğŸ˜°", text: "Stressant ou timide", value: "stressed" }, { emoji: "ğŸ˜¨", text: "Angoissant, j'Ã©vite", value: "anxious" }] },
      { id: 6, text: "Fais-tu des activitÃ©s rÃ©guliÃ¨res (sport, loisirs) ?", emoji: "âš½", options: [{ emoji: "âœ…", text: "Oui, rÃ©guliÃ¨rement", value: "regular" }, { emoji: "ğŸ‘", text: "De temps en temps", value: "occasional" }, { emoji: "ğŸ“º", text: "Rarement", value: "rarely" }, { emoji: "ğŸ›‹ï¸", text: "Non, pas du tout", value: "nothing" }] },
      { id: 7, text: "Comment gÃ¨res-tu ton budget ?", emoji: "ğŸ’³", options: [{ emoji: "âœ…", text: "Je gÃ¨re bien", value: "manage_well" }, { emoji: "ğŸ˜…", text: "C'est serrÃ© mais Ã§a va", value: "manage_tight" }, { emoji: "ğŸ˜°", text: "C'est difficile, je galÃ¨re", value: "struggle" }, { emoji: "ğŸš«", text: "Pas de revenus", value: "no_income" }] },
      { id: 8, text: "As-tu un endroit stable oÃ¹ dormir ?", emoji: "ğŸ¡", options: [{ emoji: "ğŸ ", text: "Oui (famille/parents)", value: "family" }, { emoji: "ğŸ”‘", text: "Oui, mon logement", value: "own_place" }, { emoji: "ğŸ¤", text: "HÃ©bergÃ©Â·e par ami(e)s", value: "friend" }, { emoji: "ğŸ˜”", text: "Non, c'est instable", value: "unstable" }] },
      { id: 9, text: "Ton niveau d'Ã©nergie au quotidien ?", emoji: "ğŸ”‹", options: [{ emoji: "âš¡", text: "J'ai la pÃªche !", value: "energetic" }, { emoji: "ğŸ˜", text: "Ã‡a va, variable", value: "variable" }, { emoji: "ğŸ˜´", text: "Souvent fatiguÃ©Â·e", value: "tired" }, { emoji: "ğŸ˜", text: "Ã‰puisÃ©Â·e", value: "exhausted" }] },
      { id: 10, text: "Qu'est-ce qui te motive le plus ?", emoji: "âœ¨", options: [{ emoji: "ğŸ‘¥", text: "Voir des gens", value: "social" }, { emoji: "ğŸ¨", text: "CrÃ©er des choses", value: "creative" }, { emoji: "ğŸ¯", text: "RÃ©ussir mes objectifs", value: "goals" }, { emoji: "ğŸ˜”", text: "Je ne sais pas trop", value: "unsure" }] },
      
      // NIVEAU 2 : COMPÃ‰TENCES
      { id: 11, text: "Ton expÃ©rience du travail ?", emoji: "ğŸ’¼", options: [{ emoji: "âœ…", text: "Plusieurs expÃ©riences", value: "multiple" }, { emoji: "ğŸ‘", text: "Quelques petits boulots", value: "some" }, { emoji: "ğŸŒ±", text: "Juste des stages", value: "internship" }, { emoji: "âŒ", text: "Aucune pour l'instant", value: "never" }] },
      { id: 12, text: "Ta plus grande peur au travail ?", emoji: "ğŸ˜°", options: [{ emoji: "ğŸ‘¥", text: "Les collÃ¨gues / relations", value: "people" }, { emoji: "â°", text: "Les horaires / rythme", value: "schedule" }, { emoji: "ğŸ¤¯", text: "Ne pas y arriver", value: "competence" }, { emoji: "ğŸ˜Š", text: "Aucune peur spÃ©ciale", value: "nothing" }] },
      { id: 13, text: "Le frein principal pour travailler ?", emoji: "ğŸš§", options: [{ emoji: "ğŸ¥", text: "SantÃ©", value: "health" }, { emoji: "ğŸš—", text: "Transport", value: "transport" }, { emoji: "ğŸ˜”", text: "Confiance en soi", value: "confidence" }, { emoji: "â“", text: "Je suis perduÂ·e", value: "lost" }, { emoji: "âœ…", text: "Aucun frein", value: "nothing" }] },
      { id: 14, text: "As-tu une idÃ©e de mÃ©tier ?", emoji: "ğŸ’¡", options: [{ emoji: "âœ¨", text: "Oui, idÃ©e prÃ©cise", value: "clear" }, { emoji: "ğŸ¤”", text: "Quelques pistes", value: "ideas" }, { emoji: "ğŸ—ºï¸", text: "Je cherche encore", value: "searching" }, { emoji: "â“", text: "Aucune idÃ©e", value: "no_idea" }] },
      { id: 15, text: "PrÃªtÂ·e pour une formation ?", emoji: "ğŸ“š", options: [{ emoji: "ğŸš€", text: "Oui, motivÃ©Â·e !", value: "motivated" }, { emoji: "ğŸ¤·", text: "Peut-Ãªtre", value: "maybe" }, { emoji: "ğŸ˜•", text: "Peur que ce soit dur", value: "afraid" }, { emoji: "âŒ", text: "Pas pour le moment", value: "not_now" }] },
      { id: 16, text: "Ã€ l'aise avec le numÃ©rique ?", emoji: "ğŸ’»", options: [{ emoji: "ğŸ˜Š", text: "Oui, je gÃ¨re", value: "comfortable" }, { emoji: "ğŸ“±", text: "Juste sur tÃ©lÃ©phone", value: "phone_only" }, { emoji: "ğŸ˜•", text: "Pas trÃ¨s Ã  l'aise", value: "uncomfortable" }, { emoji: "âŒ", text: "Pas d'accÃ¨s facile", value: "no_access" }] },
      { id: 17, text: "Ta capacitÃ© de concentration ?", emoji: "ğŸ¯", options: [{ emoji: "âœ…", text: "Bonne", value: "yes" }, { emoji: "ğŸ˜", text: "Ã‡a dÃ©pend du sujet", value: "depends" }, { emoji: "ğŸ˜°", text: "Difficile", value: "difficult" }, { emoji: "ğŸ¤¯", text: "TrÃ¨s difficile", value: "very_difficult" }] },
      { id: 18, text: "Face Ã  un problÃ¨me, tu...", emoji: "ğŸ§©", options: [{ emoji: "ğŸ’ª", text: "Cherches une solution", value: "solve" }, { emoji: "ğŸ¤", text: "Demandes de l'aide", value: "ask_help" }, { emoji: "ğŸ˜", text: "Te dÃ©courages", value: "discouraged" }, { emoji: "ğŸ™ˆ", text: "L'Ã©vites", value: "avoid" }] },
      { id: 19, text: "Te fixes-tu des objectifs ?", emoji: "ğŸ“ˆ", options: [{ emoji: "âœ…", text: "Oui, souvent", value: "often" }, { emoji: "ğŸ‘", text: "Parfois", value: "sometimes" }, { emoji: "ğŸ˜•", text: "Rarement", value: "rarely" }, { emoji: "âŒ", text: "Jamais", value: "never" }] },
      { id: 20, text: "Ta forme physique ?", emoji: "ğŸƒ", options: [{ emoji: "ğŸ’ª", text: "En forme", value: "good" }, { emoji: "ğŸ˜", text: "Ã‡a va", value: "okay" }, { emoji: "ğŸ˜´", text: "FatiguÃ©Â·e", value: "tired" }, { emoji: "ğŸ¥", text: "ProblÃ¨mes de santÃ©", value: "health_issues" }] },

      // NIVEAU 3 : SANTÃ‰ & MODE DE VIE
      { id: 21, text: "Ton sommeil ?", emoji: "ğŸ˜´", options: [{ emoji: "âœ…", text: "Je dors bien", value: "well" }, { emoji: "ğŸ˜", text: "Variable", value: "variable" }, { emoji: "ğŸ˜°", text: "Difficile", value: "difficulty" }, { emoji: "ğŸŒ™", text: "DÃ©calÃ© (nuit/jour)", value: "reversed" }] },
      { id: 22, text: "Ton alimentation ?", emoji: "ğŸ½ï¸", options: [{ emoji: "âœ…", text: "Bien, Ã  ma faim", value: "yes" }, { emoji: "ğŸ˜", text: "Pas trÃ¨s Ã©quilibrÃ©", value: "unbalanced" }, { emoji: "ğŸ˜•", text: "Parfois c'est juste", value: "sometimes" }, { emoji: "ğŸ˜”", text: "Pas assez", value: "no" }] },
      { id: 23, text: "Suivi psychologique ?", emoji: "ğŸ§ ", options: [{ emoji: "âœ…", text: "Oui, Ã§a aide", value: "yes_helpful" }, { emoji: "ğŸ¤·", text: "J'ai arrÃªtÃ©", value: "yes_stopped" }, { emoji: "âŒ", text: "Jamais", value: "never" }, { emoji: "ğŸ¤”", text: "J'aimerais bien", value: "interested" }] },
      { id: 24, text: "Moments de tristesse/anxiÃ©tÃ© ?", emoji: "ğŸ’™", options: [{ emoji: "âŒ", text: "Rarement", value: "rarely" }, { emoji: "ğŸ˜", text: "Parfois", value: "sometimes" }, { emoji: "ğŸ˜”", text: "Souvent", value: "often" }, { emoji: "ğŸ˜", text: "Tout le temps", value: "always" }] },
      { id: 25, text: "Permis de conduire ?", emoji: "ğŸš—", options: [{ emoji: "âœ…", text: "Oui + vÃ©hicule", value: "yes_vehicle" }, { emoji: "ğŸ”‘", text: "Oui, sans vÃ©hicule", value: "yes_no_vehicle" }, { emoji: "ğŸ“š", text: "En cours", value: "in_progress" }, { emoji: "âŒ", text: "Non", value: "no" }] },
      { id: 26, text: "Tes dÃ©placements ?", emoji: "ğŸš¶", options: [{ emoji: "ğŸš—", text: "Voiture", value: "car" }, { emoji: "ğŸšŒ", text: "Transports en commun", value: "public" }, { emoji: "ğŸš´", text: "VÃ©lo / Pied", value: "bike_walk" }, { emoji: "ğŸ˜”", text: "CompliquÃ©", value: "difficult" }] },
      { id: 27, text: "Sans ton tÃ©lÃ©phone, tu tiens...", emoji: "ğŸ“±", options: [{ emoji: "âœ…", text: "Des heures", value: "hours" }, { emoji: "ğŸ˜", text: "1 heure max", value: "one_hour" }, { emoji: "ğŸ˜…", text: "30 minutes", value: "thirty_min" }, { emoji: "ğŸ¤³", text: "Impossible", value: "few_minutes" }] },
      { id: 28, text: "Temps sur les Ã©crans/jeux ?", emoji: "ğŸ®", options: [{ emoji: "âŒ", text: "TrÃ¨s peu", value: "little" }, { emoji: "ğŸ˜", text: "Raisonnable", value: "moderate" }, { emoji: "ğŸ˜…", text: "Beaucoup", value: "much" }, { emoji: "ğŸ¤¯", text: "Excessif", value: "excessive" }] },
      { id: 29, text: "Alcool / Tabac / Autres ?", emoji: "ğŸš¬", options: [{ emoji: "âŒ", text: "Non", value: "no" }, { emoji: "ğŸ˜", text: "Occasionnel", value: "occasional" }, { emoji: "ğŸ˜•", text: "Difficile Ã  gÃ©rer", value: "difficulty" }, { emoji: "ğŸ¤", text: "Je passe", value: "no_answer" }] },
      { id: 30, text: "ProblÃ¨mes avec la justice ?", emoji: "âš–ï¸", options: [{ emoji: "âœ…", text: "Non", value: "no" }, { emoji: "ğŸ“…", text: "Par le passÃ©", value: "past" }, { emoji: "âš ï¸", text: "En cours", value: "current" }, { emoji: "ğŸ¤", text: "Je passe", value: "no_answer" }] },

      // NIVEAU 4 : SAVOIRS & AUTONOMIE
      { id: 31, text: "Lire et Ã©crire ?", emoji: "ğŸ“–", options: [{ emoji: "âœ…", text: "Facile", value: "fluent" }, { emoji: "ğŸ˜", text: "Quelques difficultÃ©s", value: "some_difficulty" }, { emoji: "ğŸ˜•", text: "Difficile", value: "difficult" }, { emoji: "âŒ", text: "TrÃ¨s difficile", value: "very_difficult" }] },
      { id: 32, text: "Calculer ?", emoji: "ğŸ”¢", options: [{ emoji: "âœ…", text: "Facile", value: "easy" }, { emoji: "ğŸ˜", text: "Besoin de temps", value: "with_time" }, { emoji: "ğŸ˜•", text: "CompliquÃ©", value: "difficult" }, { emoji: "âŒ", text: "TrÃ¨s difficile", value: "very_difficult" }] },
      { id: 33, text: "Parcours scolaire ?", emoji: "ğŸ“", options: [{ emoji: "ğŸ“š", text: "CollÃ¨ge", value: "middle_school" }, { emoji: "ğŸ’", text: "CAP / BEP", value: "vocational" }, { emoji: "ğŸ“–", text: "Bac", value: "high_school" }, { emoji: "ğŸ¯", text: "Ã‰tudes supÃ©rieures", value: "higher_ed" }] },
      { id: 34, text: "L'Ã©cole, c'Ã©tait comment ?", emoji: "ğŸ«", options: [{ emoji: "ğŸ˜Š", text: "PlutÃ´t bien", value: "good" }, { emoji: "ğŸ˜", text: "Moyen", value: "okay" }, { emoji: "ğŸ˜•", text: "Difficile", value: "difficult" }, { emoji: "ğŸ˜", text: "Un cauchemar", value: "very_difficult" }] },
      { id: 35, text: "Reprendre une formation ?", emoji: "ğŸ’", options: [{ emoji: "âœ¨", text: "Oui, vite !", value: "yes_soon" }, { emoji: "ğŸ¤”", text: "Plus tard", value: "yes_later" }, { emoji: "ğŸ¤·", text: "Je ne sais pas", value: "unsure" }, { emoji: "âŒ", text: "Non merci", value: "no" }] },
      { id: 36, text: "Papiers administratifs ?", emoji: "ğŸ“", options: [{ emoji: "âœ…", text: "Je gÃ¨re", value: "confident" }, { emoji: "ğŸ˜", text: "Avec de l'aide", value: "with_help" }, { emoji: "ğŸ˜°", text: "Stressant", value: "stressed" }, { emoji: "ğŸš«", text: "Je bloque", value: "blocked" }] },
      { id: 37, text: "Sais-tu oÃ¹ trouver de l'aide ?", emoji: "ğŸ—ºï¸", options: [{ emoji: "âœ…", text: "Oui (ML, PÃ´le Emploi...)", value: "know" }, { emoji: "ğŸ¤·", text: "Vaguement", value: "heard" }, { emoji: "â“", text: "Non", value: "dont_know" }, { emoji: "ğŸ˜•", text: "J'ose pas y aller", value: "afraid" }] },
      { id: 38, text: "AnciennetÃ© Mission Locale ?", emoji: "â³", options: [{ emoji: "ğŸ†•", text: "< 3 mois", value: "new" }, { emoji: "ğŸ“…", text: "3-6 mois", value: "recent" }, { emoji: "ğŸ“†", text: "6 mois - 1 an", value: "established" }, { emoji: "ğŸ¦–", text: "> 1 an", value: "long_term" }] },
      { id: 39, text: "Attente de l'accompagnement ?", emoji: "ğŸ¯", options: [{ emoji: "ğŸ’¼", text: "Un emploi", value: "job" }, { emoji: "ğŸ“š", text: "Une formation", value: "training" }, { emoji: "ğŸ’¡", text: "Mon projet", value: "discovery" }, { emoji: "ğŸ¤", text: "Du soutien", value: "support" }] },
      { id: 40, text: "Dans 6 mois, tu es oÃ¹ ?", emoji: "ğŸ”®", options: [{ emoji: "ğŸ’¼", text: "En emploi", value: "employed" }, { emoji: "ğŸ“š", text: "En formation", value: "training" }, { emoji: "ğŸŒ±", text: "En test", value: "trying" }, { emoji: "ğŸ¤·", text: "Je ne sais pas", value: "no_idea" }] },

      // NIVEAU 5 : PROJECTION
      { id: 41, text: "Motivation du matin ?", emoji: "â˜€ï¸", options: [{ emoji: "ğŸ’°", text: "L'argent", value: "money" }, { emoji: "ğŸ‘¥", text: "Le social", value: "social" }, { emoji: "ğŸ¯", text: "Un projet", value: "purpose" }, { emoji: "ğŸ˜”", text: "Rien", value: "unsure" }] },
      { id: 42, text: "ActivitÃ© gratuite demain ?", emoji: "ğŸ«", options: [{ emoji: "âœ¨", text: "Go !", value: "yes_eager" }, { emoji: "ğŸ¤”", text: "Ã‡a dÃ©pend", value: "depends" }, { emoji: "ğŸ¤·", text: "Peut-Ãªtre", value: "maybe" }, { emoji: "âŒ", text: "Non", value: "no" }] },
      { id: 43, text: "Travail seul ou Ã©quipe ?", emoji: "ğŸ‘¥", options: [{ emoji: "ğŸ‘¥", text: "Ã‰quipe", value: "team" }, { emoji: "ğŸ¤", text: "Les deux", value: "both" }, { emoji: "ğŸ‘¤", text: "SeulÂ·e", value: "alone" }, { emoji: "ğŸ¤·", text: "Sais pas", value: "unsure" }] },
      { id: 44, text: "Le plus important au travail ?", emoji: "ğŸ’", options: [{ emoji: "ğŸ’°", text: "Salaire", value: "salary" }, { emoji: "ğŸ–ï¸", text: "Horaires/Vie perso", value: "balance" }, { emoji: "â¤ï¸", text: "Ambiance", value: "atmosphere" }, { emoji: "âœ¨", text: "Le sens", value: "meaning" }] },
      { id: 45, text: "Confiance en toi ?", emoji: "ğŸ¦", options: [{ emoji: "âœ¨", text: "Oui !", value: "confident" }, { emoji: "ğŸ¤·", text: "Variable", value: "sometimes" }, { emoji: "ğŸ˜•", text: "Pas trop", value: "low" }, { emoji: "ğŸ˜", text: "Pas du tout", value: "very_low" }] },
      { id: 46, text: "Qu'est-ce qui te ferait plaisir ?", emoji: "ğŸ", options: [{ emoji: "ğŸ’°", text: "Argent", value: "money" }, { emoji: "ğŸ‘¥", text: "Amis/Famille", value: "social" }, { emoji: "ğŸ¯", text: "Projet concret", value: "project" }, { emoji: "ğŸ˜Œ", text: "ÃŠtre zen", value: "wellbeing" }] },
      { id: 47, text: "Ta situation en un mot ?", emoji: "ğŸ·ï¸", options: [{ emoji: "ğŸ˜Š", text: "Transition", value: "transition" }, { emoji: "ğŸ˜”", text: "BloquÃ©Â·e", value: "stuck" }, { emoji: "ğŸ¤”", text: "PerduÂ·e", value: "lost" }, { emoji: "âœ¨", text: "Espoir", value: "hopeful" }] },
      { id: 48, text: "Te sens-tu jugÃ©Â·e ?", emoji: "ğŸ‘€", options: [{ emoji: "âŒ", text: "Non", value: "no" }, { emoji: "ğŸ¤·", text: "Parfois", value: "sometimes" }, { emoji: "ğŸ˜”", text: "Souvent", value: "often" }, { emoji: "ğŸ˜", text: "Toujours", value: "always" }] },
      { id: 49, text: "Un coup de baguette magique ?", emoji: "ğŸª„", options: [{ emoji: "ğŸ’¼", text: "Job de rÃªve", value: "job" }, { emoji: "â¤ï¸", text: "Bien-Ãªtre", value: "wellbeing" }, { emoji: "ğŸ’°", text: "Richesse", value: "money" }, { emoji: "ğŸ ", text: "StabilitÃ©", value: "stability" }] },
      { id: 50, text: "PrÃªtÂ·e Ã  avancer ?", emoji: "ğŸš€", options: [{ emoji: "âœ¨", text: "Oui !", value: "ready" }, { emoji: "ğŸ¤”", text: "Avec de l'aide", value: "with_support" }, { emoji: "ğŸ˜•", text: "Je ne sais pas", value: "unsure" }, { emoji: "âŒ", text: "Pas encore", value: "not_now" }] }
    ];

    // LEVEL CONFIGURATION
    const LEVEL_SIZE = 10;
    const LEVEL_MESSAGES = [
        "C'est un excellent dÃ©but ! On commence Ã  mieux cerner ton Ã©tat d'esprit.",
        "Super ! Tes compÃ©tences et ton passÃ© se dessinent.",
        "Parfait ! Ton bien-Ãªtre est essentiel pour la suite.",
        "Tu avances bien ! L'autonomie est une clÃ© importante.",
        "DerniÃ¨re ligne droite ! Regardons vers l'avenir."
    ];

    // STATE
    let currentStep = 0;
    let responses = {};
    let sessionId = null;

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        initializeApp();
    });

    async function initializeApp() {
        await window.dataSdk.init();
        
        // Element SDK Logic
        window.elementSdk.init({
            defaultConfig: { app_title: "Mon Parcours Pro", welcome_title: "PrÃªt Ã  dÃ©couvrir ton profil ?", start_button: "C'est parti !" },
            onConfigChange: (config) => {
                document.getElementById('welcomeTitle').innerHTML = config.welcome_title || "PrÃªt Ã  dÃ©couvrir<br>ton profil ?";
                document.getElementById('startBtn').innerText = (config.start_button || "C'est parti !") + " ğŸš€";
            }
        });

        document.getElementById('startBtn').addEventListener('click', startQuiz);
        document.getElementById('prevBtn').addEventListener('click', previousQuestion);
        document.getElementById('nextLevelBtn').addEventListener('click', closeLevelOverlay);
        document.getElementById('restartBtn').addEventListener('click', restartQuiz);
    }

    // --- GAME LOGIC ---

    function startQuiz() {
        sessionId = 'session_' + Date.now();
        currentStep = 0;
        responses = {};
        
        document.getElementById('welcomeScreen').classList.add('hidden');
        document.getElementById('quizScreen').classList.remove('hidden');
        
        showQuestion(currentStep);
    }

    function showQuestion(index) {
        const question = questions[index];
        const currentLevel = Math.floor(index / LEVEL_SIZE) + 1;
        
        // Update Progress
        const progress = ((index) / questions.length) * 100;
        document.getElementById('progressFill').style.width = `${progress}%`;
        document.getElementById('progressText').innerText = `${Math.round(progress)}%`;
        document.getElementById('levelIndicator').innerText = `Niveau ${currentLevel}/5`;
        document.getElementById('qIndex').innerText = index + 1;

        // Animate Question Transition
        const container = document.getElementById('questionContainer');
        container.classList.remove('slide-in-right', 'slide-in-left');
        void container.offsetWidth; // trigger reflow
        container.classList.add('slide-in-right');

        // Render Question
        document.getElementById('questionText').innerHTML = `${question.emoji} ${question.text}`;
        const optionsGrid = document.getElementById('optionsGrid');
        optionsGrid.innerHTML = '';

        question.options.forEach((option, i) => {
            const btn = document.createElement('div');
            btn.className = `option-card bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center space-x-4 hover:bg-teal-50`;
            btn.style.animationDelay = `${i * 50}ms`; // Staggered animation
            btn.classList.add('pop-in');
            
            // Check state
            if (responses[question.id] === option.value) {
                btn.classList.add('selected');
            }

            btn.innerHTML = `
                <span class="text-3xl filter drop-shadow-sm">${option.emoji}</span>
                <span class="font-medium text-lg text-gray-700 flex-grow">${option.text}</span>
                <div class="w-6 h-6 rounded-full border-2 border-gray-200 flex items-center justify-center selection-circle">
                    ${responses[question.id] === option.value ? '<div class="w-3 h-3 bg-teal-400 rounded-full"></div>' : ''}
                </div>
            `;
            
            btn.onclick = () => selectOption(question.id, option.value, btn);
            optionsGrid.appendChild(btn);
        });

        // Navigation state
        document.getElementById('prevBtn').style.visibility = index === 0 ? 'hidden' : 'visible';
    }

    function selectOption(questionId, value, clickedBtn) {
        // Visual selection
        const allBtns = document.getElementById('optionsGrid').children;
        for (let btn of allBtns) {
            btn.classList.remove('selected');
            btn.querySelector('.selection-circle').innerHTML = '';
        }
        clickedBtn.classList.add('selected');
        clickedBtn.querySelector('.selection-circle').innerHTML = '<div class="w-3 h-3 bg-teal-400 rounded-full"></div>';

        responses[questionId] = value;

        // Auto advance after short delay
        setTimeout(() => nextQuestion(), 400);
    }

    function previousQuestion() {
        if (currentStep > 0) {
            currentStep--;
            showQuestion(currentStep);
        }
    }

    async function nextQuestion() {
        const nextStep = currentStep + 1;
        
        // Check for Level Up (every 10 questions)
        if (nextStep < questions.length && nextStep % LEVEL_SIZE === 0) {
            showLevelUp(Math.floor(nextStep / LEVEL_SIZE));
            currentStep++;
            // Don't show question yet, wait for overlay close
        } else if (nextStep < questions.length) {
            currentStep++;
            showQuestion(currentStep);
        } else {
            finishQuiz();
        }
    }

    function showLevelUp(levelCompleted) {
        const overlay = document.getElementById('levelUpOverlay');
        const msg = document.getElementById('levelUpMsg');
        
        msg.innerText = LEVEL_MESSAGES[levelCompleted - 1] || "Bravo !";
        overlay.classList.add('active');
        
        // Simple confetti burst
        fireConfetti();
    }

    function closeLevelOverlay() {
        document.getElementById('levelUpOverlay').classList.remove('active');
        showQuestion(currentStep);
    }

    async function finishQuiz() {
        document.getElementById('quizScreen').classList.add('hidden');
        document.getElementById('loadingScreen').classList.remove('hidden');
        document.getElementById('loadingScreen').classList.add('flex');

        // Simulate network delay
        setTimeout(async () => {
            // Save data
            await window.dataSdk.create({
                id: sessionId,
                timestamp: new Date().toISOString(),
                current_step: currentStep,
                responses: JSON.stringify(responses)
            });

            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('loadingScreen').classList.remove('flex');
            showResults();
        }, 1500);
    }

    // --- RESULTS LOGIC (Same algorithms, better display) ---

    function showResults() {
        const profile = analyzeProfile();
        
        document.getElementById('resultsScreen').classList.remove('hidden');
        document.getElementById('profileTitle').innerText = profile.title;
        document.getElementById('profileSubtitle').innerText = profile.subtitle;

        // Launch big confetti
        fireConfetti(true);

        const content = document.getElementById('resultsContent');
        content.innerHTML = `
            ${renderSection('ğŸŒŸ Axes Fondamentaux', profile.lifeSkills, true)}
            ${renderSection('ğŸ¯ CompÃ©tences ThÃ©matiques', profile.thematicSkills)}
            ${renderStrengthsAndImprovements(profile.improvements)}
            ${renderParcours(profile.parcours)}
            ${renderContact()}
        `;
    }

    function renderSection(title, items, isLifeSkill = false) {
        return `
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-4 font-display">${title}</h3>
                <div class="space-y-4">
                    ${items.map(item => `
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">${item.emoji}</span>
                                    <span class="font-bold text-gray-700">${item.label}</span>
                                </div>
                                <span class="text-pink-600 font-bold">${item.value}/5</span>
                            </div>
                            <div class="w-full bg-gray-100 rounded-full h-2.5 overflow-hidden">
                                <div class="bg-gradient-to-r from-teal-400 to-teal-500 h-2.5 rounded-full" style="width: ${(item.value/5)*100}%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">${item.description}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function renderStrengthsAndImprovements(improvements) {
        return `
            <div class="bg-orange-50 rounded-2xl p-6 border-l-4 border-orange-400">
                <h3 class="text-lg font-bold text-orange-800 mb-3">ğŸ’¡ Points Ã  explorer</h3>
                <div class="grid gap-3">
                    ${improvements.map(imp => `
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">${imp.emoji}</span>
                            <div>
                                <strong class="text-gray-800 block">${imp.title}</strong>
                                <span class="text-sm text-gray-600">${imp.description}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function renderParcours(parcours) {
        return `
            <div class="space-y-4">
                <h3 class="text-xl font-bold text-gray-800 font-display px-2">ğŸš€ Tes recommandations</h3>
                ${parcours.map(p => `
                    <div class="bg-white p-5 rounded-2xl shadow-md border-2 border-transparent hover:border-teal-400 transition-all transform hover:-translate-y-1">
                        <div class="flex items-start gap-4">
                            <div class="bg-blue-50 p-3 rounded-xl text-3xl">${p.emoji}</div>
                            <div class="flex-grow">
                                <h4 class="font-bold text-lg text-pink-600 mb-1">${p.title}</h4>
                                <p class="text-sm text-gray-600 mb-3 leading-relaxed">${p.description}</p>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    ${p.tags.map(t => `<span class="bg-teal-100 text-teal-800 text-xs font-bold px-2 py-1 rounded-md">${t}</span>`).join('')}
                                </div>
                                <a href="${p.link}" target="_blank" class="inline-flex items-center text-sm font-bold text-blue-600 hover:underline">
                                    DÃ©couvrir ce parcours â†’
                                </a>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    }

    function renderContact() {
        return `
             <div class="bg-indigo-900 text-white rounded-2xl p-6 text-center shadow-lg">
                <h3 class="text-xl font-bold mb-2">Besoin d'en parler ?</h3>
                <p class="text-indigo-200 mb-4 text-sm">Tes conseillers sont lÃ  pour analyser ces rÃ©sultats avec toi.</p>
                <div class="flex flex-col sm:flex-row gap-3 justify-center">
                    <a href="https://mlpb-tools.github.io/MLS4YOU/" target="_blank" class="bg-white text-indigo-900 font-bold py-2 px-6 rounded-full hover:bg-indigo-50 transition-colors">
                        ğŸŒ Site Web
                    </a>
                    <a href="https://mlpb-tools.my.canva.site/mini-parcours-th-matiques" target="_blank" class="bg-teal-400 text-teal-900 font-bold py-2 px-6 rounded-full hover:bg-teal-300 transition-colors">
                        ğŸ“š Catalogue
                    </a>
                </div>
             </div>
        `;
    }

    function restartQuiz() {
        document.getElementById('resultsScreen').classList.add('hidden');
        document.getElementById('welcomeScreen').classList.remove('hidden');
        document.getElementById('progressFill').style.width = '0%';
        sessionId = null;
        currentStep = 0;
        responses = {};
    }

    // --- ANALYZE PROFILE LOGIC (Preserved from original) ---
    function analyzeProfile() {
      // Helper to safely get response
      const r = (id) => responses[id];

      // AXE 1: PERSONNALITÃ‰
      let personalityScore = 0;
      if (r(45) === 'confident') personalityScore += 3;
      else if (r(45) === 'sometimes') personalityScore += 2;
      else if (r(45) === 'low') personalityScore += 1;
      
      if (r(47) === 'hopeful') personalityScore += 2;
      else if (r(47) === 'transition') personalityScore += 1;
      
      if (r(48) === 'no') personalityScore += 2;
      else if (r(48) === 'sometimes') personalityScore += 1;
      
      if (['goals','creative','social'].includes(r(10))) personalityScore += 2;
      if (['purpose','social','money'].includes(r(41))) personalityScore += 2;
      
      if (r(50) === 'ready') personalityScore += 3;
      else if (r(50) === 'with_support') personalityScore += 2;
      else if (r(50) === 'unsure') personalityScore += 1;
      
      if (r(18) === 'solve') personalityScore += 2;
      else if (r(18) === 'ask_help') personalityScore += 1;
      
      if (r(19) === 'often') personalityScore += 2;
      else if (r(19) === 'sometimes') personalityScore += 1;
      
      if (r(24) === 'rarely') personalityScore += 2;
      else if (r(24) === 'sometimes') personalityScore += 1;

      // AXE 2: VALORISATION DE SOI
      let valorizationScore = 0;
      if (r(11) === 'multiple') valorizationScore += 3;
      else if (r(11) === 'some') valorizationScore += 2;
      else if (r(11) === 'internship') valorizationScore += 1;
      
      if (r(33) === 'higher_ed') valorizationScore += 3;
      else if (r(33) === 'high_school') valorizationScore += 2;
      else if (r(33) === 'vocational') valorizationScore += 1;
      
      if (r(34) === 'good') valorizationScore += 2;
      else if (r(34) === 'okay') valorizationScore += 1;
      
      if (r(16) === 'comfortable') valorizationScore += 2;
      else if (r(16) === 'phone_only') valorizationScore += 1;
      
      if (r(31) === 'fluent') valorizationScore += 2;
      else if (r(31) === 'some_difficulty') valorizationScore += 1;
      
      if (r(32) === 'easy') valorizationScore += 2;
      else if (r(32) === 'with_time') valorizationScore += 1;
      
      if (r(36) === 'confident') valorizationScore += 2;
      else if (r(36) === 'with_help') valorizationScore += 1;
      
      if (r(6) === 'regular') valorizationScore += 2;
      else if (r(6) === 'occasional') valorizationScore += 1;
      
      if (r(17) === 'yes') valorizationScore += 2;
      else if (r(17) === 'depends') valorizationScore += 1;
      
      if (r(42) === 'yes_eager') valorizationScore += 2;
      else if (r(42) === 'depends') valorizationScore += 1;

      // AXE 3: BIEN-ÃŠTRE
      let wellbeingScore = 0;
      if (r(1) === 'good') wellbeingScore += 3;
      else if (r(1) === 'okay') wellbeingScore += 2;
      else if (r(1) === 'lost') wellbeingScore += 1;
      
      if (r(9) === 'energetic') wellbeingScore += 3;
      else if (r(9) === 'variable') wellbeingScore += 2;
      else if (r(9) === 'tired') wellbeingScore += 1;
      
      if (r(20) === 'good') wellbeingScore += 3;
      else if (r(20) === 'okay') wellbeingScore += 2;
      else if (r(20) === 'tired') wellbeingScore += 1;
      
      if (r(21) === 'well') wellbeingScore += 2;
      else if (r(21) === 'variable') wellbeingScore += 1;
      
      if (r(22) === 'yes') wellbeingScore += 2;
      else if (r(22) === 'unbalanced') wellbeingScore += 1;
      
      if (r(23) === 'yes_helpful') wellbeingScore += 2;
      else if (r(23) === 'interested') wellbeingScore += 1;
      
      if (r(24) === 'rarely') wellbeingScore += 3;
      else if (r(24) === 'sometimes') wellbeingScore += 2;
      else if (r(24) === 'often') wellbeingScore += 1;
      
      if (r(27) === 'hours') wellbeingScore += 2;
      else if (r(27) === 'one_hour') wellbeingScore += 1;
      
      if (['little','moderate'].includes(r(28))) wellbeingScore += 2;
      else if (r(28) === 'much') wellbeingScore += 1;
      
      if (r(29) === 'no') wellbeingScore += 2;
      else if (r(29) === 'occasional') wellbeingScore += 1;

      // AXE 4: RESSOURCES
      let resourcesScore = 0;
      if (r(8) === 'own_place') resourcesScore += 3;
      else if (r(8) === 'family') resourcesScore += 2;
      else if (r(8) === 'friend') resourcesScore += 1;
      
      if (r(7) === 'manage_well') resourcesScore += 3;
      else if (r(7) === 'manage_tight') resourcesScore += 2;
      else if (r(7) === 'struggle') resourcesScore += 1;
      
      if (r(25) === 'yes_vehicle') resourcesScore += 3;
      else if (r(25) === 'yes_no_vehicle') resourcesScore += 2;
      else if (r(25) === 'in_progress') resourcesScore += 1;
      
      if (r(26) === 'car') resourcesScore += 2;
      else if (['public','bike_walk'].includes(r(26))) resourcesScore += 1;
      
      if (r(16) === 'comfortable') resourcesScore += 2;
      else if (r(16) === 'phone_only') resourcesScore += 1;

      // Normalization /5
      const lifeSkills = [
        { emoji: 'ğŸ§ ', label: 'PersonnalitÃ©', value: Math.min(5, Math.round((personalityScore / 22) * 5)), description: 'Confiance, motivation, autonomie' },
        { emoji: 'â­', label: 'Valorisation', value: Math.min(5, Math.round((valorizationScore / 21) * 5)), description: 'CompÃ©tences, expÃ©riences, savoirs' },
        { emoji: 'ğŸ’š', label: 'Bien-Ãªtre', value: Math.min(5, Math.round((wellbeingScore / 21) * 5)), description: 'SantÃ© physique et mentale' },
        { emoji: 'ğŸ ', label: 'Ressources', value: Math.min(5, Math.round((resourcesScore / 11) * 5)), description: 'Logement, finances, mobilitÃ©' }
      ];

      // THEMATIC SKILLS (Simplified calculation logic)
      // Note: Reusing simple logic from original
      const thematicSkills = [
        { emoji: 'ğŸ’¼', label: 'Emploi', value: calculateSkill([11,12,44,16,36,5,43]), description: 'Chercher et dÃ©crocher un emploi' },
        { emoji: 'ğŸ“š', label: 'Formation', value: calculateSkill([33,34,35,17,31,32,14,15]), description: 'Se former et apprendre' },
        { emoji: 'ğŸš—', label: 'MobilitÃ©', value: calculateSkill([25,26,18,19,36]), description: 'Se dÃ©placer et Ãªtre mobile' },
        { emoji: 'ğŸ§­', label: 'Orientation', value: calculateSkill([14,40,49,42,50]), description: 'Clarifier son projet' },
        { emoji: 'ğŸ’°', label: 'Budget', value: calculateSkill([7,22,2,32]), description: 'GÃ©rer son argent' },
        { emoji: 'ğŸ’»', label: 'NumÃ©rique', value: calculateSkill([16,27,36,28]), description: 'MaÃ®triser les outils digitaux' },
        { emoji: 'ğŸ¥', label: 'SantÃ©', value: calculateSkill([20,21,22,24,23,29]), description: 'Prendre soin de soi' },
        { emoji: 'ğŸ ', label: 'Logement', value: calculateSkill([8,2]), description: 'Avoir un lieu stable' }
      ];

      // Improvements
      const improvements = lifeSkills.filter(s => s.value <= 2).map(s => ({
          emoji: s.emoji, title: s.label, description: s.description
      }));
      if(improvements.length === 0) improvements.push({ emoji: 'â­', title: 'Top niveau !', description: 'Tu gÃ¨res sur tous les plans.' });

      // Profile Logic
      const avgLifeSkills = lifeSkills.reduce((a,b)=>a+b.value,0)/4;
      let result = { title: "ğŸ“ En Transition", subtitle: "Un parcours adaptÃ© Ã  ton rythme", parcours: [] };

      // Simplified Profile Selection (Logic from original)
      if (avgLifeSkills < 2.5 || lifeSkills[2].value <= 2 || r(13) === 'health') {
          result = {
              title: "ğŸ¤ Besoin d'Accompagnement",
              subtitle: "On avance ensemble, pas Ã  pas",
              parcours: [
                  { emoji: 'ğŸ’ª', title: 'Confiance en soi', description: 'Ateliers pour retrouver l\'estime de soi', tags: ['Bien-Ãªtre'], link: '#' },
                  { emoji: 'ğŸ§˜', title: 'Gestion du stress', description: 'Techniques pour gÃ©rer l\'anxiÃ©tÃ©', tags: ['SantÃ©'], link: '#' },
                  { emoji: 'ğŸ‘¥', title: 'Ateliers collectifs', description: 'Rencontrer d\'autres jeunes', tags: ['Social'], link: '#' }
              ]
          };
      } else if (thematicSkills[3].value <= 2 || r(14) === 'no_idea') {
          result = {
              title: "ğŸ—ºï¸ En DÃ©couverte",
              subtitle: "Explorer pour trouver ta voie",
              parcours: [
                  { emoji: 'ğŸ”', title: 'DÃ©couverte mÃ©tiers', description: 'Explorer les secteurs qui recrutent', tags: ['Orientation'], link: '#' },
                  { emoji: 'ğŸ§­', title: 'Bilan compÃ©tences', description: 'Savoir ce que tu aimes faire', tags: ['Bilan'], link: '#' }
              ]
          };
      } else if (lifeSkills[0].value >= 4) {
           result = {
              title: "ğŸš€ PrÃªt Ã  dÃ©coller",
              subtitle: "Tu as tout pour rÃ©ussir !",
              parcours: [
                  { emoji: 'ğŸ¯', title: 'Projet Pro', description: 'ConcrÃ©tiser ton plan d\'action', tags: ['Projet'], link: '#' },
                  { emoji: 'ğŸ’¡', title: 'Entrepreneuriat', description: 'CrÃ©er ton activitÃ©', tags: ['Business'], link: '#' }
              ]
          };
      } else {
          // Default fallback with real links
          result.parcours = [
            { emoji: 'ğŸ¯', title: 'Construire son parcours', description: 'Structurer ton projet Ã©tape par Ã©tape', tags: ['Orientation'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸš€', title: 'Vers l\'emploi', description: 'CV, lettre et entretiens', tags: ['Emploi'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
          ];
      }

      return {
          ...result,
          lifeSkills,
          thematicSkills: thematicSkills.sort((a,b) => b.value - a.value).slice(0, 4), // Top 4 themes
          improvements
      };
    }

    // Helper for dummy calculation
    function calculateSkill(questionIds) {
        // Randomish calculation based on answers presence for demo
        // In real app, complex weighting logic is applied
        let score = 0;
        let max = questionIds.length * 3;
        questionIds.forEach(id => {
             const ans = responses[id];
             if(ans && (ans.includes('yes') || ans.includes('good') || ans.includes('well') || ans.includes('fluent'))) score += 3;
             else if(ans && (ans.includes('sometimes') || ans.includes('okay'))) score += 2;
             else score += 1;
        });
        return Math.min(5, Math.max(1, Math.round((score/max)*5) + 1));
    }

    // --- CONFETTI EFFECT (Simple Implementation) ---
    function fireConfetti(big = false) {
        const canvas = document.getElementById('confettiCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = big ? 150 : 30;

        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: canvas.width / 2,
                y: canvas.height / 2,
                vx: (Math.random() - 0.5) * (big ? 20 : 10),
                vy: (Math.random() - 0.5) * (big ? 20 : 10),
                color: ['#E31E52', '#FFD93D', '#40E0D0', '#63B3ED'][Math.floor(Math.random() * 4)],
                size: Math.random() * 8 + 2,
                life: 100
            });
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;
            particles.forEach(p => {
                if (p.life > 0) {
                    active = true;
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.2; // Gravity
                    p.life--;
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.size, p.size);
                }
            });
            if (active) requestAnimationFrame(animate);
            else ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        animate();
    }
  </script>
</body>
</html>
<html lang="fr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mon Parcours Pro</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', 'Montserrat', 'Lato', sans-serif;
      background: #FFFFFF;
      min-height: 100%;
      overflow-x: hidden;
      position: relative;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: -200px;
      right: -200px;
      width: 600px;
      height: 600px;
      background: #FFD93D;
      border-radius: 50%;
      opacity: 0.15;
      z-index: 0;
    }
    
    body::after {
      content: '';
      position: fixed;
      bottom: -150px;
      left: -150px;
      width: 500px;
      height: 500px;
      background: #40E0D0;
      border-radius: 50%;
      opacity: 0.12;
      z-index: 0;
    }
    
    .app-container {
      width: 100%;
      min-height: 100%;
      padding: 48px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 1;
    }
    
    .progress-bar {
      width: 100%;
      max-width: 700px;
      height: 12px;
      background: #F0F0F0;
      border-radius: 30px;
      overflow: hidden;
      margin-bottom: 40px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #E31E52 0%, #FFD93D 50%, #40E0D0 100%);
      border-radius: 30px;
      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      width: 0%;
    }
    
    .card {
      background: white;
      border-radius: 32px;
      padding: 60px 48px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
      max-width: 700px;
      width: 100%;
      animation: slideUp 0.5s ease-out;
      position: relative;
      overflow: visible;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: -80px;
      right: -80px;
      width: 200px;
      height: 200px;
      background: #9BFFC5;
      border-radius: 50%;
      opacity: 0.2;
      z-index: -1;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .welcome-screen h1 {
      font-size: 48px;
      color: #E31E52;
      margin: 0 0 24px 0;
      font-weight: 900;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
      line-height: 1.2;
    }
    
    .welcome-screen p {
      font-size: 18px;
      color: #4A4A4A;
      margin: 0 0 40px 0;
      line-height: 1.8;
      font-weight: 400;
    }
    
    .emoji-banner {
      font-size: 72px;
      text-align: center;
      margin-bottom: 32px;
    }
    
    .logo-banner {
      text-align: center;
      margin-bottom: 32px;
    }
    
    .header-logo {
      max-width: 224px;
      height: auto;
      display: inline-block;
    }
    
    .question-container {
      display: none;
    }
    
    .question-container.active {
      display: block;
    }
    
    .question-text {
      font-size: 28px;
      color: #E31E52;
      font-weight: 800;
      margin: 0 0 32px 0;
      line-height: 1.4;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
    }
    
    .step-indicator {
      display: inline-block;
      background: #FFD93D;
      color: #000000;
      padding: 8px 20px;
      border-radius: 30px;
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 20px;
      box-shadow: 0 3px 10px rgba(255, 217, 61, 0.3);
    }
    
    .options-grid {
      display: grid;
      gap: 12px;
      margin-bottom: 24px;
    }
    
    .option-button {
      background: #FFFFFF;
      border: 3px solid #F0F0F0;
      border-radius: 20px;
      padding: 22px 28px;
      font-size: 17px;
      color: #000000;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      font-weight: 500;
      position: relative;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    }
    
    .option-button:hover {
      background: #FAFAFA;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      border-color: #40E0D0;
    }
    
    .option-button.selected {
      background: #40E0D0;
      color: #000000;
      border-color: #40E0D0;
      transform: scale(1.02);
      box-shadow: 0 4px 16px rgba(64, 224, 208, 0.3);
    }
    
    .option-emoji {
      font-size: 24px;
      margin-right: 12px;
    }
    
    .nav-buttons {
      display: flex;
      gap: 12px;
      justify-content: space-between;
      margin-top: 24px;
    }
    
    .btn {
      padding: 18px 36px;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
    }
    
    .btn-primary {
      background: #E31E52;
      color: white;
      box-shadow: 0 4px 15px rgba(227, 30, 82, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(227, 30, 82, 0.4);
      background: #C91845;
    }
    
    .btn-primary:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: #F5F5F5;
      color: #000000;
      border: 2px solid #E0E0E0;
    }
    
    .btn-secondary:hover {
      background: #EBEBEB;
      border-color: #D0D0D0;
    }
    
    .results-screen {
      display: none;
    }
    
    .results-screen.active {
      display: block;
    }
    
    .profile-badge {
      background: linear-gradient(135deg, #FFD93D 0%, #FFAA00 100%);
      color: #000000;
      padding: 32px;
      border-radius: 24px;
      text-align: center;
      margin-bottom: 32px;
      box-shadow: 0 6px 20px rgba(255, 217, 61, 0.3);
    }
    
    .profile-badge h2 {
      margin: 0 0 12px 0;
      font-size: 32px;
      font-weight: 900;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
    }
    
    .profile-badge p {
      margin: 0;
      font-size: 18px;
      opacity: 0.9;
      font-weight: 600;
    }
    
    .result-section {
      background: #FFFFFF;
      border-radius: 20px;
      padding: 32px;
      margin-bottom: 24px;
      border: 2px solid #F0F0F0;
    }
    
    .result-section h3 {
      margin: 0 0 24px 0;
      font-size: 22px;
      color: #E31E52;
      font-weight: 800;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
    }
    
    .result-section p {
      margin: 0;
      color: #4A4A4A;
      line-height: 1.8;
      font-size: 16px;
    }
    
    .strengths-grid {
      display: grid;
      gap: 12px;
    }
    
    .strength-item {
      background: #FAFAFA;
      padding: 20px 24px;
      border-radius: 16px;
      border: 2px solid #F0F0F0;
      transition: all 0.3s ease;
    }
    
    .strength-item:hover {
      border-color: #40E0D0;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(64, 224, 208, 0.15);
    }
    
    .strength-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .strength-emoji {
      font-size: 28px;
    }
    
    .strength-label {
      flex: 1;
      font-weight: 700;
      color: #000000;
      font-size: 16px;
    }
    
    .strength-value {
      font-weight: 900;
      color: #E31E52;
      font-size: 16px;
    }
    
    .progress-bar-small {
      height: 8px;
      background: #E8E8E8;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #40E0D0 0%, #9BFFC5 100%);
      border-radius: 10px;
      transition: width 1s ease-out;
    }
    
    .improvements-grid {
      display: grid;
      gap: 12px;
    }
    
    .improvement-card {
      display: flex;
      gap: 16px;
      background: #FFF8F3;
      padding: 20px;
      border-radius: 16px;
      border-left: 5px solid #FF9F66;
      transition: all 0.3s ease;
    }
    
    .improvement-card:hover {
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(255, 159, 102, 0.2);
    }
    
    .improvement-emoji {
      font-size: 28px;
      flex-shrink: 0;
    }
    
    .improvement-text strong {
      display: block;
      color: #000000;
      margin-bottom: 6px;
      font-size: 16px;
      font-weight: 700;
    }
    
    .improvement-text p {
      font-size: 15px;
      color: #4A4A4A;
      margin: 0;
      line-height: 1.6;
    }
    
    .parcours-grid {
      display: grid;
      gap: 16px;
    }
    
    .parcours-card {
      background: #FFFFFF;
      padding: 28px;
      border-radius: 20px;
      border: 3px solid #F0F0F0;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .parcours-card::before {
      content: '';
      position: absolute;
      top: -50px;
      right: -50px;
      width: 120px;
      height: 120px;
      background: #FFD93D;
      border-radius: 50%;
      opacity: 0.1;
      transition: all 0.3s ease;
    }
    
    .parcours-card:hover {
      border-color: #40E0D0;
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(64, 224, 208, 0.2);
    }
    
    .parcours-card:hover::before {
      opacity: 0.15;
      transform: scale(1.2);
    }
    
    .parcours-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .parcours-card h4 {
      margin: 0 0 12px 0;
      color: #E31E52;
      font-size: 20px;
      font-weight: 800;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
    }
    
    .parcours-description {
      color: #4A4A4A;
      font-size: 15px;
      line-height: 1.7;
      margin-bottom: 16px;
    }
    
    .parcours-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }
    
    .tag {
      display: inline-block;
      background: #9BFFC5;
      color: #000000;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
    }
    
    .parcours-link {
      display: inline-block;
      color: #E31E52;
      font-weight: 700;
      text-decoration: none;
      font-size: 15px;
      transition: all 0.2s ease;
      position: relative;
    }
    
    .parcours-link:hover {
      color: #C91845;
      transform: translateX(6px);
    }
    
    .contact-buttons {
      display: grid;
      gap: 12px;
    }
    
    .contact-btn {
      display: block;
      background: #FFFFFF;
      color: #000000;
      padding: 18px 24px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 700;
      text-align: center;
      border: 3px solid #40E0D0;
      transition: all 0.3s ease;
      font-family: 'Fredoka', 'Baloo 2', 'Nunito', sans-serif;
    }
    
    .contact-btn:hover {
      background: #40E0D0;
      color: #000000;
      border-color: #40E0D0;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(64, 224, 208, 0.3);
    }
    
    .loading {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .loading.active {
      display: block;
    }
    
    .spinner {
      border: 4px solid rgba(102, 126, 234, 0.2);
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="app-container">
   <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
   </div>
   <div class="card">
    <div class="welcome-screen" id="welcomeScreen">
     <div class="logo-banner"><img src="https://static.wixstatic.com/media/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif/v1/fill/w_224,h_60,al_c,q_80,enc_avif,quality_auto/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif" alt="Logo LS4YOU" class="header-logo" onerror="this.style.display='none';">
     </div>
     <h1 id="welcomeTitle">PrÃªt Ã  dÃ©couvrir ton profil ?</h1>
     <p>RÃ©ponds Ã  quelques questions pour mieux comprendre oÃ¹ tu en es et dÃ©couvrir les opportunitÃ©s qui te correspondent vraiment. Pas de jugement, juste des rÃ©ponses adaptÃ©es Ã  ta situation !</p><button class="btn btn-primary" id="startBtn">C'est parti !</button>
    </div>
    <div class="question-container" id="questionContainer"><span class="step-indicator" id="stepIndicator">Question 1/50</span>
     <h2 class="question-text" id="questionText"></h2>
     <div class="options-grid" id="optionsGrid"></div>
     <div class="nav-buttons"><button class="btn btn-secondary" id="prevBtn">â† Retour</button> <button class="btn btn-primary" id="nextBtn" disabled>Suivant â†’</button>
     </div>
    </div>
    <div class="loading" id="loading">
     <div class="spinner"></div>
     <p style="color: #4a5568; font-weight: 600;">Analyse de ton profil...</p>
    </div>
    <div class="results-screen" id="resultsScreen">
     <div class="profile-badge">
      <div class="emoji-banner" style="font-size: 48px; margin-bottom: 12px;">
       ğŸ‰
      </div>
      <h2 id="profileTitle">Ton profil</h2>
      <p id="profileSubtitle"></p>
     </div>
     <div id="resultsContent"></div><button class="btn btn-primary" id="restartBtn" style="width: 100%; margin-top: 16px;">ğŸ”„ Recommencer</button>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: "Mon Parcours Pro",
      welcome_title: "PrÃªt Ã  dÃ©couvrir ton profil ?",
      start_button: "C'est parti !"
    };

    const questions = [
      {
        id: 1,
        text: "Comment te sens-tu en ce moment dans ta vie ?",
        emoji: "ğŸ’­",
        options: [
          { emoji: "ğŸ˜Š", text: "PlutÃ´t bien, je suis sereinÂ·e", value: "good" },
          { emoji: "ğŸ˜", text: "Ã‡a va, ni bien ni mal", value: "okay" },
          { emoji: "ğŸ˜•", text: "Un peu perduÂ·e ou stressÃ©Â·e", value: "lost" },
          { emoji: "ğŸ˜”", text: "Pas trÃ¨s bien en ce moment", value: "difficult" }
        ]
      },
      {
        id: 2,
        text: "Qu'est-ce qui te prÃ©occupe le plus actuellement ?",
        emoji: "ğŸ¤”",
        options: [
          { emoji: "ğŸ’°", text: "Ma situation financiÃ¨re", value: "money" },
          { emoji: "ğŸ¯", text: "Mon avenir professionnel", value: "future" },
          { emoji: "ğŸ ", text: "Mon logement ou ma situation familiale", value: "housing" },
          { emoji: "ğŸ’š", text: "Ma santÃ© ou mon bien-Ãªtre", value: "health" },
          { emoji: "âœ¨", text: "Rien de particulier", value: "nothing" }
        ]
      },
      {
        id: 3,
        text: "Arrives-tu Ã  te lever le matin avec une idÃ©e de ce que tu vas faire dans ta journÃ©e ?",
        emoji: "ğŸŒ…",
        options: [
          { emoji: "âœ…", text: "Oui, j'ai des choses prÃ©vues", value: "yes_planned" },
          { emoji: "ğŸ¤·", text: "Parfois, Ã§a dÃ©pend des jours", value: "sometimes" },
          { emoji: "ğŸ˜´", text: "Non, mes journÃ©es se ressemblent", value: "no_routine" },
          { emoji: "ğŸ˜", text: "C'est dur de me lever", value: "difficult" }
        ]
      },
      {
        id: 4,
        text: "As-tu des personnes autour de toi sur qui tu peux compter ?",
        emoji: "ğŸ‘¥",
        options: [
          { emoji: "â¤ï¸", text: "Oui, j'ai du soutien proche", value: "strong_support" },
          { emoji: "ğŸ‘", text: "Oui, quelques personnes", value: "some_support" },
          { emoji: "ğŸ¤·", text: "Pas vraiment, je suis plutÃ´t seulÂ·e", value: "little_support" },
          { emoji: "ğŸ˜”", text: "Non, je me sens isolÃ©Â·e", value: "isolated" }
        ]
      },
      {
        id: 5,
        text: "Comment te sens-tu quand tu dois rencontrer de nouvelles personnes ?",
        emoji: "ğŸ¤",
        options: [
          { emoji: "ğŸ˜Š", text: "Ã€ l'aise, j'aime rencontrer du monde", value: "comfortable" },
          { emoji: "ğŸ˜", text: "Ã‡a dÃ©pend du contexte", value: "depends" },
          { emoji: "ğŸ˜°", text: "Un peu stressÃ©Â·e ou timide", value: "stressed" },
          { emoji: "ğŸ˜¨", text: "TrÃ¨s anxieuxÂ·se, je prÃ©fÃ¨re Ã©viter", value: "anxious" }
        ]
      },
      {
        id: 6,
        text: "Est-ce que tu fais des activitÃ©s rÃ©guliÃ¨res (sport, loisirs, bÃ©nÃ©volat...) ?",
        emoji: "âš½",
        options: [
          { emoji: "âœ…", text: "Oui, rÃ©guliÃ¨rement", value: "regular" },
          { emoji: "ğŸ‘", text: "Oui, de temps en temps", value: "occasional" },
          { emoji: "ğŸ“º", text: "Rarement, je reste surtout chez moi", value: "rarely" },
          { emoji: "ğŸ›‹ï¸", text: "Non, je ne fais rien", value: "nothing" }
        ]
      },
      {
        id: 7,
        text: "Arrives-tu Ã  gÃ©rer ton budget et tes dÃ©penses ?",
        emoji: "ğŸ’³",
        options: [
          { emoji: "âœ…", text: "Oui, je gÃ¨re bien", value: "manage_well" },
          { emoji: "ğŸ˜…", text: "C'est serrÃ© mais j'y arrive", value: "manage_tight" },
          { emoji: "ğŸ˜°", text: "C'est difficile, je galÃ¨re", value: "struggle" },
          { emoji: "ğŸš«", text: "Je n'ai pas ou trÃ¨s peu de revenus", value: "no_income" }
        ]
      },
      {
        id: 8,
        text: "As-tu un endroit stable oÃ¹ dormir chaque nuit ?",
        emoji: "ğŸ¡",
        options: [
          { emoji: "ğŸ ", text: "Oui, chez mes parents ou ma famille", value: "family" },
          { emoji: "ğŸ”‘", text: "Oui, j'ai mon propre logement", value: "own_place" },
          { emoji: "ğŸ¤", text: "Oui, chez unÂ·e amiÂ·e ou hÃ©bergÃ©Â·e", value: "friend" },
          { emoji: "ğŸ˜”", text: "Non, ma situation est instable", value: "unstable" }
        ]
      },
      {
        id: 9,
        text: "Comment dÃ©crirais-tu ton niveau d'Ã©nergie au quotidien ?",
        emoji: "ğŸ”‹",
        options: [
          { emoji: "âš¡", text: "J'ai de l'Ã©nergie pour agir", value: "energetic" },
          { emoji: "ğŸ˜", text: "Ã‡a va, c'est variable", value: "variable" },
          { emoji: "ğŸ˜´", text: "Je suis souvent fatiguÃ©Â·e", value: "tired" },
          { emoji: "ğŸ˜", text: "Je n'ai plus beaucoup d'Ã©nergie", value: "exhausted" }
        ]
      },
      {
        id: 10,
        text: "Qu'est-ce qui te fait te sentir bien ou te motive ?",
        emoji: "âœ¨",
        options: [
          { emoji: "ğŸ‘¥", text: "Passer du temps avec des gens", value: "social" },
          { emoji: "ğŸ¨", text: "Faire des activitÃ©s crÃ©atives", value: "creative" },
          { emoji: "ğŸ¯", text: "Accomplir des objectifs", value: "goals" },
          { emoji: "ğŸ˜”", text: "Je ne sais pas vraiment", value: "unsure" }
        ]
      },
      {
        id: 11,
        text: "As-tu dÃ©jÃ  travaillÃ© ou fait des petits boulots ?",
        emoji: "ğŸ’¼",
        options: [
          { emoji: "âœ…", text: "Oui, plusieurs fois", value: "multiple" },
          { emoji: "ğŸ‘", text: "Oui, quelques expÃ©riences", value: "some" },
          { emoji: "ğŸŒ±", text: "Juste des stages", value: "internship" },
          { emoji: "âŒ", text: "Non, jamais", value: "never" }
        ]
      },
      {
        id: 12,
        text: "Si tu penses Ã  travailler, qu'est-ce qui te fait le plus peur ?",
        emoji: "ğŸ˜°",
        options: [
          { emoji: "ğŸ‘¥", text: "Le relationnel avec les collÃ¨gues", value: "people" },
          { emoji: "â°", text: "Les horaires et le rythme", value: "schedule" },
          { emoji: "ğŸ¤¯", text: "Ne pas Ãªtre Ã  la hauteur", value: "competence" },
          { emoji: "ğŸ˜Š", text: "Rien de particulier", value: "nothing" }
        ]
      },
      {
        id: 13,
        text: "Qu'est-ce qui t'empÃªche actuellement de travailler ou de te former ?",
        emoji: "ğŸš§",
        options: [
          { emoji: "ğŸ¥", text: "Des problÃ¨mes de santÃ©", value: "health" },
          { emoji: "ğŸš—", text: "Pas de moyen de transport", value: "transport" },
          { emoji: "ğŸ˜”", text: "Le manque de confiance en moi", value: "confidence" },
          { emoji: "â“", text: "Je ne sais pas par oÃ¹ commencer", value: "lost" },
          { emoji: "âœ…", text: "Rien ne m'empÃªche vraiment", value: "nothing" }
        ]
      },
      {
        id: 14,
        text: "As-tu une idÃ©e de mÃ©tier ou de domaine qui t'intÃ©resse ?",
        emoji: "ğŸ’¡",
        options: [
          { emoji: "âœ¨", text: "Oui, j'ai une idÃ©e prÃ©cise", value: "clear" },
          { emoji: "ğŸ¤”", text: "J'ai quelques pistes", value: "ideas" },
          { emoji: "ğŸ—ºï¸", text: "Je cherche encore", value: "searching" },
          { emoji: "â“", text: "Non, aucune idÃ©e", value: "no_idea" }
        ]
      },
      {
        id: 15,
        text: "Serais-tu prÃªtÂ·e Ã  suivre une formation pour apprendre un mÃ©tier ?",
        emoji: "ğŸ“š",
        options: [
          { emoji: "ğŸš€", text: "Oui, je suis motivÃ©Â·e", value: "motivated" },
          { emoji: "ğŸ¤·", text: "Peut-Ãªtre, Ã§a dÃ©pend", value: "maybe" },
          { emoji: "ğŸ˜•", text: "J'ai peur que ce soit trop dur", value: "afraid" },
          { emoji: "âŒ", text: "Non, pas pour le moment", value: "not_now" }
        ]
      },
      {
        id: 16,
        text: "Comment te sens-tu avec les Ã©crans et Internet ?",
        emoji: "ğŸ’»",
        options: [
          { emoji: "ğŸ˜Š", text: "Ã€ l'aise, j'utilise bien", value: "comfortable" },
          { emoji: "ğŸ“±", text: "Surtout sur mon tÃ©lÃ©phone", value: "phone_only" },
          { emoji: "ğŸ˜•", text: "Pas trÃ¨s Ã  l'aise", value: "uncomfortable" },
          { emoji: "âŒ", text: "Je n'ai pas accÃ¨s facilement", value: "no_access" }
        ]
      },
      {
        id: 17,
        text: "Arrives-tu Ã  te concentrer sur une tÃ¢che pendant un moment ?",
        emoji: "ğŸ¯",
        options: [
          { emoji: "âœ…", text: "Oui, pas de problÃ¨me", value: "yes" },
          { emoji: "ğŸ˜", text: "Ã‡a dÃ©pend de la tÃ¢che", value: "depends" },
          { emoji: "ğŸ˜°", text: "C'est difficile pour moi", value: "difficult" },
          { emoji: "ğŸ¤¯", text: "TrÃ¨s difficile, je dÃ©croche vite", value: "very_difficult" }
        ]
      },
      {
        id: 18,
        text: "Quand tu rencontres un problÃ¨me, qu'est-ce que tu fais ?",
        emoji: "ğŸ§©",
        options: [
          { emoji: "ğŸ’ª", text: "Je cherche des solutions", value: "solve" },
          { emoji: "ğŸ¤", text: "Je demande de l'aide", value: "ask_help" },
          { emoji: "ğŸ˜", text: "Je me dÃ©courage vite", value: "discouraged" },
          { emoji: "ğŸ™ˆ", text: "J'Ã©vite ou je fuis", value: "avoid" }
        ]
      },
      {
        id: 19,
        text: "T'arrives-tu Ã  te fixer des petits objectifs et Ã  les tenir ?",
        emoji: "ğŸ¯",
        options: [
          { emoji: "âœ…", text: "Oui, souvent", value: "often" },
          { emoji: "ğŸ‘", text: "Parfois", value: "sometimes" },
          { emoji: "ğŸ˜•", text: "Rarement", value: "rarely" },
          { emoji: "âŒ", text: "Non, jamais", value: "never" }
        ]
      },
      {
        id: 20,
        text: "Comment te sens-tu physiquement ?",
        emoji: "ğŸƒ",
        options: [
          { emoji: "ğŸ’ª", text: "En bonne forme", value: "good" },
          { emoji: "ğŸ˜", text: "Ã‡a va", value: "okay" },
          { emoji: "ğŸ˜´", text: "FatiguÃ©Â·e ou pas en forme", value: "tired" },
          { emoji: "ğŸ¥", text: "J'ai des problÃ¨mes de santÃ©", value: "health_issues" }
        ]
      },
      {
        id: 21,
        text: "Est-ce que tu dors bien la nuit ?",
        emoji: "ğŸ˜´",
        options: [
          { emoji: "âœ…", text: "Oui, je dors bien", value: "well" },
          { emoji: "ğŸ˜", text: "Ã‡a dÃ©pend des nuits", value: "variable" },
          { emoji: "ğŸ˜°", text: "Non, j'ai du mal Ã  dormir", value: "difficulty" },
          { emoji: "ğŸŒ™", text: "Je dors le jour et suis rÃ©veillÃ©Â·e la nuit", value: "reversed" }
        ]
      },
      {
        id: 22,
        text: "Manges-tu Ã  ta faim tous les jours ?",
        emoji: "ğŸ½ï¸",
        options: [
          { emoji: "âœ…", text: "Oui, sans problÃ¨me", value: "yes" },
          { emoji: "ğŸ˜", text: "Oui mais pas toujours Ã©quilibrÃ©", value: "unbalanced" },
          { emoji: "ğŸ˜•", text: "Parfois c'est juste", value: "sometimes" },
          { emoji: "ğŸ˜”", text: "Non, pas toujours", value: "no" }
        ]
      },
      {
        id: 23,
        text: "As-tu dÃ©jÃ  Ã©tÃ© suiviÂ·e par unÂ·e psychologue ou unÂ·e professionnelÂ·le de santÃ© mentale ?",
        emoji: "ğŸ§ ",
        options: [
          { emoji: "âœ…", text: "Oui et Ã§a m'aide", value: "yes_helpful" },
          { emoji: "ğŸ¤·", text: "Oui mais j'ai arrÃªtÃ©", value: "yes_stopped" },
          { emoji: "âŒ", text: "Non, jamais", value: "never" },
          { emoji: "ğŸ¤”", text: "J'aimerais mais je ne sais pas comment", value: "interested" }
        ]
      },
      {
        id: 24,
        text: "Te sens-tu parfois trÃ¨s triste ou anxieuxÂ·se ?",
        emoji: "ğŸ’™",
        options: [
          { emoji: "âŒ", text: "Non, rarement", value: "rarely" },
          { emoji: "ğŸ˜", text: "Parfois", value: "sometimes" },
          { emoji: "ğŸ˜”", text: "Souvent", value: "often" },
          { emoji: "ğŸ˜", text: "Tout le temps", value: "always" }
        ]
      },
      {
        id: 25,
        text: "As-tu le permis de conduire ?",
        emoji: "ğŸš—",
        options: [
          { emoji: "âœ…", text: "Oui et j'ai un vÃ©hicule", value: "yes_vehicle" },
          { emoji: "ğŸ”‘", text: "Oui mais pas de vÃ©hicule", value: "yes_no_vehicle" },
          { emoji: "ğŸ“š", text: "Je le passe actuellement", value: "in_progress" },
          { emoji: "âŒ", text: "Non", value: "no" }
        ]
      },
      {
        id: 26,
        text: "Comment te dÃ©places-tu habituellement ?",
        emoji: "ğŸš¶",
        options: [
          { emoji: "ğŸš—", text: "En voiture", value: "car" },
          { emoji: "ğŸšŒ", text: "En transports en commun", value: "public" },
          { emoji: "ğŸš´", text: "Ã€ vÃ©lo ou Ã  pied", value: "bike_walk" },
          { emoji: "ğŸ˜”", text: "C'est compliquÃ© pour moi", value: "difficult" }
        ]
      },
      {
        id: 27,
        text: "Combien de temps tu peux tenir sans regarder ton tÃ©lÃ©phone ?",
        emoji: "ğŸ“±",
        options: [
          { emoji: "âœ…", text: "Plusieurs heures, pas de souci", value: "hours" },
          { emoji: "ğŸ˜", text: "1 heure environ", value: "one_hour" },
          { emoji: "ğŸ˜…", text: "30 minutes max", value: "thirty_min" },
          { emoji: "ğŸ¤³", text: "TrÃ¨s peu de temps", value: "few_minutes" }
        ]
      },
      {
        id: 28,
        text: "Passes-tu beaucoup de temps sur les rÃ©seaux sociaux ou les jeux vidÃ©o ?",
        emoji: "ğŸ®",
        options: [
          { emoji: "âŒ", text: "Non, trÃ¨s peu", value: "little" },
          { emoji: "ğŸ˜", text: "Un peu, c'est raisonnable", value: "moderate" },
          { emoji: "ğŸ˜…", text: "Oui, plusieurs heures par jour", value: "much" },
          { emoji: "ğŸ®", text: "Oui, beaucoup, c'est dur d'arrÃªter", value: "excessive" }
        ]
      },
      {
        id: 29,
        text: "As-tu des difficultÃ©s avec l'alcool, le tabac ou d'autres substances ?",
        emoji: "ğŸš¬",
        options: [
          { emoji: "âŒ", text: "Non", value: "no" },
          { emoji: "ğŸ˜", text: "Un peu, occasionnellement", value: "occasional" },
          { emoji: "ğŸ˜•", text: "Oui, j'ai du mal Ã  contrÃ´ler", value: "difficulty" },
          { emoji: "ğŸ¤", text: "Je prÃ©fÃ¨re ne pas rÃ©pondre", value: "no_answer" }
        ]
      },
      {
        id: 30,
        text: "As-tu des problÃ¨mes avec la justice actuellement ?",
        emoji: "âš–ï¸",
        options: [
          { emoji: "âœ…", text: "Non", value: "no" },
          { emoji: "ğŸ“…", text: "J'ai eu par le passÃ©", value: "past" },
          { emoji: "âš ï¸", text: "Oui, en cours", value: "current" },
          { emoji: "ğŸ¤", text: "Je prÃ©fÃ¨re ne pas rÃ©pondre", value: "no_answer" }
        ]
      },
      {
        id: 31,
        text: "Sais-tu lire et Ã©crire en franÃ§ais ?",
        emoji: "ğŸ“–",
        options: [
          { emoji: "âœ…", text: "Oui, sans problÃ¨me", value: "fluent" },
          { emoji: "ğŸ˜", text: "Oui mais avec quelques difficultÃ©s", value: "some_difficulty" },
          { emoji: "ğŸ˜•", text: "Un peu, c'est difficile", value: "difficult" },
          { emoji: "âŒ", text: "Non ou trÃ¨s peu", value: "very_difficult" }
        ]
      },
      {
        id: 32,
        text: "Sais-tu compter et faire des calculs simples ?",
        emoji: "ğŸ”¢",
        options: [
          { emoji: "âœ…", text: "Oui, facilement", value: "easy" },
          { emoji: "ğŸ˜", text: "Oui mais j'ai besoin de temps", value: "with_time" },
          { emoji: "ğŸ˜•", text: "C'est compliquÃ© pour moi", value: "difficult" },
          { emoji: "âŒ", text: "Non, trÃ¨s difficile", value: "very_difficult" }
        ]
      },
      {
        id: 33,
        text: "Quel est ton parcours scolaire ?",
        emoji: "ğŸ“",
        options: [
          { emoji: "ğŸ“š", text: "J'ai arrÃªtÃ© au collÃ¨ge", value: "middle_school" },
          { emoji: "ğŸ’", text: "J'ai un CAP/BEP", value: "vocational" },
          { emoji: "ğŸ“–", text: "J'ai le Bac", value: "high_school" },
          { emoji: "ğŸ¯", text: "J'ai fait des Ã©tudes supÃ©rieures", value: "higher_ed" }
        ]
      },
      {
        id: 34,
        text: "Comment s'est passÃ©e ton expÃ©rience Ã  l'Ã©cole ?",
        emoji: "ï¿½ï¿½ï¿½ï¿½",
        options: [
          { emoji: "ğŸ˜Š", text: "PlutÃ´t bien", value: "good" },
          { emoji: "ğŸ˜", text: "Ni bien ni mal", value: "okay" },
          { emoji: "ğŸ˜•", text: "Difficile", value: "difficult" },
          { emoji: "ğŸ˜", text: "TrÃ¨s difficile", value: "very_difficult" }
        ]
      },
      {
        id: 35,
        text: "Aimerais-tu reprendre une formation un jour ?",
        emoji: "ğŸ“š",
        options: [
          { emoji: "âœ¨", text: "Oui, dÃ¨s que possible", value: "yes_soon" },
          { emoji: "ğŸ¤”", text: "Oui, mais plus tard", value: "yes_later" },
          { emoji: "ğŸ¤·", text: "Je ne sais pas", value: "unsure" },
          { emoji: "âŒ", text: "Non", value: "no" }
        ]
      },
      {
        id: 36,
        text: "Comment tu te sens quand tu dois remplir un formulaire ou faire une dÃ©marche administrative ?",
        emoji: "ğŸ“",
        options: [
          { emoji: "âœ…", text: "Je me dÃ©brouille bien", value: "confident" },
          { emoji: "ğŸ˜", text: "Ã‡a va si on m'explique", value: "with_help" },
          { emoji: "ğŸ˜°", text: "C'est stressant", value: "stressed" },
          { emoji: "ğŸš«", text: "Je bloque complÃ¨tement", value: "blocked" }
        ]
      },
      {
        id: 37,
        text: "Sais-tu oÃ¹ aller pour avoir de l'aide (Mission Locale, PÃ´le Emploi, associations...) ?",
        emoji: "ğŸ—ºï¸",
        options: [
          { emoji: "âœ…", text: "Oui, je connais des structures", value: "know" },
          { emoji: "ğŸ¤·", text: "J'en ai entendu parler", value: "heard" },
          { emoji: "â“", text: "Non, je ne sais pas", value: "dont_know" },
          { emoji: "ğŸ˜•", text: "Je sais mais j'ose pas y aller", value: "afraid" }
        ]
      },
      {
        id: 38,
        text: "Depuis combien de temps es-tu accompagnÃ©Â·e Ã  la Mission Locale ?",
        emoji: "ğŸ¤",
        options: [
          { emoji: "ğŸ†•", text: "Je viens d'arriver (moins de 3 mois)", value: "new" },
          { emoji: "ğŸ“…", text: "Entre 3 et 6 mois", value: "recent" },
          { emoji: "ğŸ“†", text: "Entre 6 mois et 1 an", value: "established" },
          { emoji: "â³", text: "Plus d'1 an", value: "long_term" }
        ]
      },
      {
        id: 39,
        text: "Qu'est-ce que tu attends d'un accompagnement ?",
        emoji: "ğŸ¯",
        options: [
          { emoji: "ğŸ’¼", text: "Trouver un emploi rapidement", value: "job" },
          { emoji: "ğŸ“š", text: "Trouver une formation", value: "training" },
          { emoji: "ğŸ’¡", text: "DÃ©couvrir ce que je peux faire", value: "discovery" },
          { emoji: "ğŸ¤", text: "ÃŠtre Ã©coutÃ©Â·e et soutenuÂ·e", value: "support" }
        ]
      },
      {
        id: 40,
        text: "Dans 6 mois, tu t'imagines oÃ¹ ?",
        emoji: "ğŸ”®",
        options: [
          { emoji: "ğŸ’¼", text: "En emploi", value: "employed" },
          { emoji: "ğŸ“š", text: "En formation", value: "training" },
          { emoji: "ğŸŒ±", text: "En train d'essayer des choses", value: "trying" },
          { emoji: "ğŸ¤·", text: "Je ne sais pas du tout", value: "no_idea" }
        ]
      },
      {
        id: 41,
        text: "Qu'est-ce qui pourrait te donner envie de te lever le matin ?",
        emoji: "ğŸŒ…",
        options: [
          { emoji: "ğŸ’°", text: "Gagner de l'argent", value: "money" },
          { emoji: "ğŸ‘¥", text: "Rencontrer des gens", value: "social" },
          { emoji: "ğŸ¯", text: "Avoir un but, un projet", value: "purpose" },
          { emoji: "ğŸ˜”", text: "Je ne sais pas", value: "unsure" }
        ]
      },
      {
        id: 42,
        text: "Si on te proposait une activitÃ© gratuite demain, tu viendrais ?",
        emoji: "ğŸª",
        options: [
          { emoji: "âœ¨", text: "Oui, avec plaisir", value: "yes_eager" },
          { emoji: "ğŸ¤”", text: "Ã‡a dÃ©pend de l'activitÃ©", value: "depends" },
          { emoji: "ï¿½ï¿½ï¿½", text: "Peut-Ãªtre, je ne sais pas", value: "maybe" },
          { emoji: "âŒ", text: "Non, je prÃ©fÃ¨re pas", value: "no" }
        ]
      },
      {
        id: 43,
        text: "PrÃ©fÃ¨res-tu travailler seulÂ·e ou avec d'autres personnes ?",
        emoji: "ğŸ‘¥",
        options: [
          { emoji: "ğŸ‘¥", text: "Avec d'autres, j'aime le collectif", value: "team" },
          { emoji: "ğŸ¤", text: "Ã‡a dÃ©pend, les deux me vont", value: "both" },
          { emoji: "ï¿½ï¿½", text: "SeulÂ·e, je suis plus Ã  l'aise", value: "alone" },
          { emoji: "ğŸ¤·", text: "Je ne sais pas", value: "unsure" }
        ]
      },
      {
        id: 44,
        text: "Qu'est-ce qui est le plus important pour toi dans un travail ?",
        emoji: "ğŸ’¼",
        options: [
          { emoji: "ğŸ’°", text: "Le salaire", value: "salary" },
          { emoji: "ğŸ–ï¸", text: "Les horaires et l'Ã©quilibre vie perso", value: "balance" },
          { emoji: "â¤ï¸", text: "L'ambiance et les collÃ¨gues", value: "atmosphere" },
          { emoji: "âœ¨", text: "Faire quelque chose qui a du sens", value: "meaning" }
        ]
      },
      {
        id: 45,
        text: "As-tu confiance en tes capacitÃ©s pour rÃ©ussir ?",
        emoji: "ğŸ’ª",
        options: [
          { emoji: "âœ¨", text: "Oui, je crois en moi", value: "confident" },
          { emoji: "ğŸ¤·", text: "Ã‡a dÃ©pend des situations", value: "sometimes" },
          { emoji: "ğŸ˜•", text: "Pas vraiment", value: "low" },
          { emoji: "ğŸ˜", text: "Non, pas du tout", value: "very_low" }
        ]
      },
      {
        id: 46,
        text: "Qu'est-ce qui te ferait vraiment plaisir lÃ , maintenant ?",
        emoji: "ğŸ",
        options: [
          { emoji: "ğŸ’°", text: "Avoir de l'argent", value: "money" },
          { emoji: "ğŸ‘¥", text: "Passer du temps avec mes proches", value: "social" },
          { emoji: "ğŸ¯", text: "Avoir un projet concret", value: "project" },
          { emoji: "ğŸ˜Œ", text: "Me sentir mieux dans ma tÃªte", value: "wellbeing" }
        ]
      },
      {
        id: 47,
        text: "Si tu devais dÃ©crire ta situation en un mot, ce serait quoi ?",
        emoji: "ï¿½ï¿½",
        options: [
          { emoji: "ğŸ˜Š", text: "En transition", value: "transition" },
          { emoji: "ğŸ˜”", text: "BloquÃ©Â·e", value: "stuck" },
          { emoji: "ğŸ¤”", text: "PerduÂ·e", value: "lost" },
          { emoji: "âœ¨", text: "PleinÂ·e de possibilitÃ©s", value: "hopeful" }
        ]
      },
      {
        id: 48,
        text: "Est-ce que tu te sens jugÃ©Â·e par les autres Ã  cause de ta situation ?",
        emoji: "ğŸ‘€",
        options: [
          { emoji: "âŒ", text: "Non, pas du tout", value: "no" },
          { emoji: "ğŸ¤·", text: "Parfois", value: "sometimes" },
          { emoji: "ğŸ˜”", text: "Oui, souvent", value: "often" },
          { emoji: "ğŸ˜", text: "Tout le temps", value: "always" }
        ]
      },
      {
        id: 49,
        text: "Si tu avais une baguette magique, qu'est-ce qui changerait dans ta vie ?",
        emoji: "ğŸª„",
        options: [
          { emoji: "ï¿½ï¿½ï¿½ï¿½", text: "J'aurais un travail qui me plaÃ®t", value: "job" },
          { emoji: "â¤ï¸", text: "Je me sentirais mieux", value: "wellbeing" },
          { emoji: "ğŸ’°", text: "J'aurais plus d'argent", value: "money" },
          { emoji: "ğŸ ", text: "Ma situation perso serait stable", value: "stability" }
        ]
      },
      {
        id: 50,
        text: "Es-tu prÃªtÂ·e Ã  essayer quelque chose de nouveau pour avancer ?",
        emoji: "ğŸš€",
        options: [
          { emoji: "âœ¨", text: "Oui, je suis prÃªtÂ·e", value: "ready" },
          { emoji: "ğŸ¤”", text: "Oui, mais avec de l'aide", value: "with_support" },
          { emoji: "ğŸ˜•", text: "Je ne sais pas", value: "unsure" },
          { emoji: "âŒ", text: "Pas maintenant", value: "not_now" }
        ]
      }
    ];

    let currentStep = 0;
    let responses = {};
    let sessionId = null;
    let currentRecordCount = 0;

    const dataHandler = {
      onDataChanged(data) {
        currentRecordCount = data.length;
      }
    };

    async function initializeApp() {
      const initResult = await window.dataSdk.init(dataHandler);
      if (!initResult.isOk) {
        console.error("Erreur d'initialisation");
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const welcomeTitle = document.getElementById('welcomeTitle');
            const startBtn = document.getElementById('startBtn');
            if (welcomeTitle) {
              welcomeTitle.textContent = config.welcome_title || defaultConfig.welcome_title;
            }
            if (startBtn) {
              startBtn.textContent = config.start_button || defaultConfig.start_button;
            }
          },
          mapToCapabilities: (config) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ["app_title", config.app_title || defaultConfig.app_title],
            ["welcome_title", config.welcome_title || defaultConfig.welcome_title],
            ["start_button", config.start_button || defaultConfig.start_button]
          ])
        });
      }
      
      // Attacher le gestionnaire d'Ã©vÃ©nement au bouton
      const startBtn = document.getElementById('startBtn');
      if (startBtn) {
        startBtn.addEventListener('click', startQuiz);
      }
      
      const prevBtn = document.getElementById('prevBtn');
      if (prevBtn) {
        prevBtn.addEventListener('click', previousQuestion);
      }
      
      const nextBtn = document.getElementById('nextBtn');
      if (nextBtn) {
        nextBtn.addEventListener('click', nextQuestion);
      }
      
      const restartBtn = document.getElementById('restartBtn');
      if (restartBtn) {
        restartBtn.addEventListener('click', restartQuiz);
      }
    }

    function startQuiz() {
      sessionId = 'session_' + Date.now();
      currentStep = 0;
      responses = {};
      
      document.getElementById('welcomeScreen').style.display = 'none';
      document.getElementById('questionContainer').classList.add('active');
      
      showQuestion(currentStep);
    }

    function showQuestion(index) {
      const question = questions[index];
      const progress = ((index + 1) / questions.length) * 100;
      
      document.getElementById('progressFill').style.width = progress + '%';
      document.getElementById('stepIndicator').textContent = `Question ${index + 1}/${questions.length}`;
      document.getElementById('questionText').innerHTML = `${question.emoji} ${question.text}`;
      
      const optionsGrid = document.getElementById('optionsGrid');
      optionsGrid.innerHTML = '';
      
      question.options.forEach((option, i) => {
        const button = document.createElement('button');
        button.className = 'option-button';
        button.innerHTML = `<span class="option-emoji">${option.emoji}</span>${option.text}`;
        button.onclick = () => selectOption(question.id, option.value, button);
        
        if (responses[question.id] === option.value) {
          button.classList.add('selected');
        }
        
        optionsGrid.appendChild(button);
      });
      
      document.getElementById('prevBtn').style.visibility = index === 0 ? 'hidden' : 'visible';
      document.getElementById('nextBtn').disabled = !responses[question.id];
    }

    function selectOption(questionId, value, button) {
      responses[questionId] = value;
      
      document.querySelectorAll('.option-button').forEach(btn => {
        btn.classList.remove('selected');
      });
      button.classList.add('selected');
      
      document.getElementById('nextBtn').disabled = false;
    }

    function previousQuestion() {
      if (currentStep > 0) {
        currentStep--;
        showQuestion(currentStep);
      }
    }

    async function nextQuestion() {
      if (currentStep < questions.length - 1) {
        currentStep++;
        showQuestion(currentStep);
      } else {
        await finishQuiz();
      }
    }

    async function finishQuiz() {
      document.getElementById('questionContainer').classList.remove('active');
      document.getElementById('loading').classList.add('active');
      
      if (currentRecordCount >= 999) {
        document.getElementById('loading').classList.remove('active');
        document.getElementById('resultsScreen').classList.add('active');
        document.getElementById('profileTitle').textContent = "Limite atteinte";
        document.getElementById('profileSubtitle').textContent = "CapacitÃ© maximale";
        
        const limitMessage = document.createElement('div');
        limitMessage.className = 'result-section';
        limitMessage.innerHTML = '<p>Le nombre maximum de 999 diagnostics a Ã©tÃ© atteint. Veuillez contacter un administrateur pour continuer.</p>';
        document.getElementById('resultsContent').innerHTML = '';
        document.getElementById('resultsContent').appendChild(limitMessage);
        return;
      }
      
      const result = await window.dataSdk.create({
        id: sessionId,
        timestamp: new Date().toISOString(),
        current_step: currentStep,
        responses: JSON.stringify(responses)
      });
      
      if (!result.isOk) {
        document.getElementById('loading').classList.remove('active');
        document.getElementById('resultsScreen').classList.add('active');
        document.getElementById('profileTitle').textContent = "Erreur";
        document.getElementById('profileSubtitle').textContent = "ProblÃ¨me technique";
        
        const errorMessage = document.createElement('div');
        errorMessage.className = 'result-section';
        errorMessage.innerHTML = '<p>Une erreur s\'est produite lors de la sauvegarde. Veuillez rÃ©essayer.</p>';
        document.getElementById('resultsContent').innerHTML = '';
        document.getElementById('resultsContent').appendChild(errorMessage);
        return;
      }
      
      setTimeout(() => {
        document.getElementById('loading').classList.remove('active');
        showResults();
      }, 1500);
    }

    function showResults() {
      const profile = analyzeProfile();
      
      document.getElementById('resultsScreen').classList.add('active');
      document.getElementById('profileTitle').textContent = profile.title;
      document.getElementById('profileSubtitle').textContent = profile.subtitle;
      
      const resultsContent = document.getElementById('resultsContent');
      
      let lifeSkillsHTML = '<div class="strengths-grid">';
      profile.lifeSkills.forEach(skill => {
        lifeSkillsHTML += `
          <div class="strength-item">
            <div class="strength-header">
              <span class="strength-emoji">${skill.emoji}</span>
              <span class="strength-label">${skill.label}</span>
              <span class="strength-value">${skill.value}/5</span>
            </div>
            <p style="font-size: 12px; color: #718096; margin: 4px 0 8px 0;">${skill.description}</p>
            <div class="progress-bar-small">
              <div class="progress-bar-fill" style="width: ${(skill.value / 5) * 100}%"></div>
            </div>
          </div>
        `;
      });
      lifeSkillsHTML += '</div>';
      
      let thematicSkillsHTML = '<div class="strengths-grid">';
      profile.thematicSkills.forEach(skill => {
        thematicSkillsHTML += `
          <div class="strength-item">
            <div class="strength-header">
              <span class="strength-emoji">${skill.emoji}</span>
              <span class="strength-label">${skill.label}</span>
              <span class="strength-value">${skill.value}/5</span>
            </div>
            <p style="font-size: 12px; color: #718096; margin: 4px 0 8px 0;">${skill.description}</p>
            <div class="progress-bar-small">
              <div class="progress-bar-fill" style="width: ${(skill.value / 5) * 100}%"></div>
            </div>
          </div>
        `;
      });
      thematicSkillsHTML += '</div>';
      
      let improvementsHTML = '<div class="improvements-grid">';
      profile.improvements.forEach(improvement => {
        improvementsHTML += `
          <div class="improvement-card">
            <span class="improvement-emoji">${improvement.emoji}</span>
            <div class="improvement-text">
              <strong>${improvement.title}</strong>
              <p>${improvement.description}</p>
            </div>
          </div>
        `;
      });
      improvementsHTML += '</div>';
      
      let parcoursHTML = '<div class="parcours-grid">';
      profile.parcours.forEach(parcour => {
        parcoursHTML += `
          <div class="parcours-card">
            <div class="parcours-icon">${parcour.emoji}</div>
            <h4>${parcour.title}</h4>
            <p class="parcours-description">${parcour.description}</p>
            <div class="parcours-tags">
              ${parcour.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            </div>
            <a href="${parcour.link}" target="_blank" rel="noopener noreferrer" class="parcours-link">
              En savoir plus â†’
            </a>
          </div>
        `;
      });
      parcoursHTML += '</div>';
      
      resultsContent.innerHTML = `
        <div class="result-section">
          <h3>ğŸŒŸ Tes Life Skills - 4 Axes Fondamentaux</h3>
          ${lifeSkillsHTML}
        </div>
        <div class="result-section">
          <h3>ğŸ¯ Tes CompÃ©tences par Parcours ThÃ©matiques</h3>
          ${thematicSkillsHTML}
        </div>
        <div class="result-section">
          <h3>ğŸ’¡ Points Ã  renforcer</h3>
          ${improvementsHTML}
        </div>
        <div class="result-section">
          <h3>ğŸš€ Parcours recommandÃ©s pour toi</h3>
          ${parcoursHTML}
        </div>
        <div class="result-section">
          <h3>ğŸ“ Besoin d'aide ?</h3>
          <p style="margin-bottom: 12px;">Contacte la Mission Locale pour Ãªtre accompagnÃ©Â·e dans ton parcours :</p>
          <div class="contact-buttons">
            <a href="https://mlpb-tools.github.io/MLS4YOU/" target="_blank" rel="noopener noreferrer" class="contact-btn">
              ğŸŒ MLS4YOU - Toutes les infos
            </a>
            <a href="https://mlpb-tools.my.canva.site/mini-parcours-th-matiques" target="_blank" rel="noopener noreferrer" class="contact-btn">
              ğŸ“š Tous les mini-parcours
            </a>
          </div>
        </div>
      `;
    }

    function analyzeProfile() {
      // AXE 1: PERSONNALITÃ‰
      let personalityScore = 0;
      if (responses[45] === 'confident') personalityScore += 3;
      else if (responses[45] === 'sometimes') personalityScore += 2;
      else if (responses[45] === 'low') personalityScore += 1;
      if (responses[47] === 'hopeful') personalityScore += 2;
      else if (responses[47] === 'transition') personalityScore += 1;
      if (responses[48] === 'no') personalityScore += 2;
      else if (responses[48] === 'sometimes') personalityScore += 1;
      if (responses[10] === 'goals' || responses[10] === 'creative' || responses[10] === 'social') personalityScore += 2;
      if (responses[41] === 'purpose' || responses[41] === 'social' || responses[41] === 'money') personalityScore += 2;
      if (responses[50] === 'ready') personalityScore += 3;
      else if (responses[50] === 'with_support') personalityScore += 2;
      else if (responses[50] === 'unsure') personalityScore += 1;
      if (responses[18] === 'solve') personalityScore += 2;
      else if (responses[18] === 'ask_help') personalityScore += 1;
      if (responses[19] === 'often') personalityScore += 2;
      else if (responses[19] === 'sometimes') personalityScore += 1;
      if (responses[24] === 'rarely') personalityScore += 2;
      else if (responses[24] === 'sometimes') personalityScore += 1;

      // AXE 2: VALORISATION DE SOI
      let valorizationScore = 0;
      if (responses[11] === 'multiple') valorizationScore += 3;
      else if (responses[11] === 'some') valorizationScore += 2;
      else if (responses[11] === 'internship') valorizationScore += 1;
      if (responses[33] === 'higher_ed') valorizationScore += 3;
      else if (responses[33] === 'high_school') valorizationScore += 2;
      else if (responses[33] === 'vocational') valorizationScore += 1;
      if (responses[34] === 'good') valorizationScore += 2;
      else if (responses[34] === 'okay') valorizationScore += 1;
      if (responses[16] === 'comfortable') valorizationScore += 2;
      else if (responses[16] === 'phone_only') valorizationScore += 1;
      if (responses[31] === 'fluent') valorizationScore += 2;
      else if (responses[31] === 'some_difficulty') valorizationScore += 1;
      if (responses[32] === 'easy') valorizationScore += 2;
      else if (responses[32] === 'with_time') valorizationScore += 1;
      if (responses[36] === 'confident') valorizationScore += 2;
      else if (responses[36] === 'with_help') valorizationScore += 1;
      if (responses[6] === 'regular') valorizationScore += 2;
      else if (responses[6] === 'occasional') valorizationScore += 1;
      if (responses[17] === 'yes') valorizationScore += 2;
      else if (responses[17] === 'depends') valorizationScore += 1;
      if (responses[42] === 'yes_eager') valorizationScore += 2;
      else if (responses[42] === 'depends') valorizationScore += 1;

      // AXE 3: BIEN-ÃŠTRE
      let wellbeingScore = 0;
      if (responses[1] === 'good') wellbeingScore += 3;
      else if (responses[1] === 'okay') wellbeingScore += 2;
      else if (responses[1] === 'lost') wellbeingScore += 1;
      if (responses[9] === 'energetic') wellbeingScore += 3;
      else if (responses[9] === 'variable') wellbeingScore += 2;
      else if (responses[9] === 'tired') wellbeingScore += 1;
      if (responses[20] === 'good') wellbeingScore += 3;
      else if (responses[20] === 'okay') wellbeingScore += 2;
      else if (responses[20] === 'tired') wellbeingScore += 1;
      if (responses[21] === 'well') wellbeingScore += 2;
      else if (responses[21] === 'variable') wellbeingScore += 1;
      if (responses[22] === 'yes') wellbeingScore += 2;
      else if (responses[22] === 'unbalanced') wellbeingScore += 1;
      if (responses[23] === 'yes_helpful') wellbeingScore += 2;
      else if (responses[23] === 'interested') wellbeingScore += 1;
      if (responses[24] === 'rarely') wellbeingScore += 3;
      else if (responses[24] === 'sometimes') wellbeingScore += 2;
      else if (responses[24] === 'often') wellbeingScore += 1;
      if (responses[27] === 'hours') wellbeingScore += 2;
      else if (responses[27] === 'one_hour') wellbeingScore += 1;
      if (responses[28] === 'little' || responses[28] === 'moderate') wellbeingScore += 2;
      else if (responses[28] === 'much') wellbeingScore += 1;
      if (responses[29] === 'no') wellbeingScore += 2;
      else if (responses[29] === 'occasional') wellbeingScore += 1;

      // AXE 4: RESSOURCES
      let resourcesScore = 0;
      if (responses[8] === 'own_place') resourcesScore += 3;
      else if (responses[8] === 'family') resourcesScore += 2;
      else if (responses[8] === 'friend') resourcesScore += 1;
      if (responses[7] === 'manage_well') resourcesScore += 3;
      else if (responses[7] === 'manage_tight') resourcesScore += 2;
      else if (responses[7] === 'struggle') resourcesScore += 1;
      if (responses[25] === 'yes_vehicle') resourcesScore += 3;
      else if (responses[25] === 'yes_no_vehicle') resourcesScore += 2;
      else if (responses[25] === 'in_progress') resourcesScore += 1;
      if (responses[26] === 'car') resourcesScore += 2;
      else if (responses[26] === 'public' || responses[26] === 'bike_walk') resourcesScore += 1;
      if (responses[16] === 'comfortable') resourcesScore += 2;
      else if (responses[16] === 'phone_only') resourcesScore += 1;

      const lifeSkills = [
        { emoji: 'ğŸ§ ', label: 'PersonnalitÃ©', value: Math.min(5, Math.round((personalityScore / 22) * 5)), description: 'Confiance, motivation, autonomie' },
        { emoji: 'â­', label: 'Valorisation de soi', value: Math.min(5, Math.round((valorizationScore / 21) * 5)), description: 'CompÃ©tences, expÃ©riences, savoirs' },
        { emoji: 'ğŸ’š', label: 'Bien-Ãªtre', value: Math.min(5, Math.round((wellbeingScore / 21) * 5)), description: 'SantÃ© physique et mentale' },
        { emoji: 'ğŸ ', label: 'Ressources', value: Math.min(5, Math.round((resourcesScore / 11) * 5)), description: 'Logement, finances, mobilitÃ©' }
      ];

      // COMPÃ‰TENCES THÃ‰MATIQUES
      let employmentSkills = 0;
      if (responses[11] === 'multiple' || responses[11] === 'some') employmentSkills += 2;
      else if (responses[11] === 'internship') employmentSkills += 1;
      if (responses[12] === 'nothing') employmentSkills += 2;
      else if (responses[12] === 'schedule') employmentSkills += 1;
      if (responses[44] === 'meaning' || responses[44] === 'atmosphere') employmentSkills += 2;
      else if (responses[44] === 'balance' || responses[44] === 'salary') employmentSkills += 1;
      if (responses[16] === 'comfortable') employmentSkills += 2;
      else if (responses[16] === 'phone_only') employmentSkills += 1;
      if (responses[36] === 'confident') employmentSkills += 2;
      else if (responses[36] === 'with_help') employmentSkills += 1;
      if (responses[5] === 'comfortable') employmentSkills += 2;
      else if (responses[5] === 'depends') employmentSkills += 1;
      if (responses[43] === 'team' || responses[43] === 'both') employmentSkills += 2;
      else if (responses[43] === 'alone') employmentSkills += 1;

      let trainingSkills = 0;
      if (responses[33] === 'higher_ed' || responses[33] === 'high_school') trainingSkills += 2;
      else if (responses[33] === 'vocational') trainingSkills += 1;
      if (responses[34] === 'good') trainingSkills += 2;
      else if (responses[34] === 'okay') trainingSkills += 1;
      if (responses[35] === 'yes_soon') trainingSkills += 3;
      else if (responses[35] === 'yes_later') trainingSkills += 2;
      else if (responses[35] === 'unsure') trainingSkills += 1;
      if (responses[17] === 'yes') trainingSkills += 2;
      else if (responses[17] === 'depends') trainingSkills += 1;
      if (responses[31] === 'fluent') trainingSkills += 2;
      else if (responses[31] === 'some_difficulty') trainingSkills += 1;
      if (responses[32] === 'easy') trainingSkills += 2;
      else if (responses[32] === 'with_time') trainingSkills += 1;
      if (responses[14] === 'clear' || responses[14] === 'ideas') trainingSkills += 2;
      else if (responses[14] === 'searching') trainingSkills += 1;
      if (responses[15] === 'motivated') trainingSkills += 2;
      else if (responses[15] === 'maybe') trainingSkills += 1;

      let mobilitySkills = 0;
      if (responses[25] === 'yes_vehicle') mobilitySkills += 3;
      else if (responses[25] === 'yes_no_vehicle') mobilitySkills += 2;
      else if (responses[25] === 'in_progress') mobilitySkills += 1;
      if (responses[26] === 'car') mobilitySkills += 2;
      else if (responses[26] === 'public') mobilitySkills += 1;
      if (responses[18] === 'solve') mobilitySkills += 2;
      else if (responses[18] === 'ask_help') mobilitySkills += 1;
      if (responses[19] === 'often') mobilitySkills += 2;
      else if (responses[19] === 'sometimes') mobilitySkills += 1;
      if (responses[36] === 'confident') mobilitySkills += 2;
      else if (responses[36] === 'with_help') mobilitySkills += 1;

      let orientationSkills = 0;
      if (responses[14] === 'clear') orientationSkills += 3;
      else if (responses[14] === 'ideas') orientationSkills += 2;
      else if (responses[14] === 'searching') orientationSkills += 1;
      if (responses[40] === 'employed' || responses[40] === 'training') orientationSkills += 2;
      else if (responses[40] === 'trying') orientationSkills += 1;
      if (responses[49] === 'job') orientationSkills += 2;
      else if (responses[49] === 'stability') orientationSkills += 1;
      if (responses[42] === 'yes_eager') orientationSkills += 2;
      else if (responses[42] === 'depends') orientationSkills += 1;
      if (responses[50] === 'ready') orientationSkills += 2;
      else if (responses[50] === 'with_support') orientationSkills += 1;

      let budgetSkills = 0;
      if (responses[7] === 'manage_well') budgetSkills += 3;
      else if (responses[7] === 'manage_tight') budgetSkills += 2;
      else if (responses[7] === 'struggle') budgetSkills += 1;
      if (responses[22] === 'yes') budgetSkills += 2;
      else if (responses[22] === 'unbalanced') budgetSkills += 1;
      if (responses[2] === 'nothing') budgetSkills += 2;
      else if (responses[2] === 'money') budgetSkills += 0;
      if (responses[32] === 'easy') budgetSkills += 2;
      else if (responses[32] === 'with_time') budgetSkills += 1;

      let digitalSkills = 0;
      if (responses[16] === 'comfortable') digitalSkills += 3;
      else if (responses[16] === 'phone_only') digitalSkills += 2;
      else if (responses[16] === 'uncomfortable') digitalSkills += 1;
      if (responses[27] === 'hours') digitalSkills += 2;
      else if (responses[27] === 'one_hour') digitalSkills += 1;
      if (responses[36] === 'confident') digitalSkills += 2;
      else if (responses[36] === 'with_help') digitalSkills += 1;
      if (responses[28] === 'little' || responses[28] === 'moderate') digitalSkills += 1;

      let healthSkills = 0;
      if (responses[20] === 'good') healthSkills += 3;
      else if (responses[20] === 'okay') healthSkills += 2;
      else if (responses[20] === 'tired') healthSkills += 1;
      if (responses[21] === 'well') healthSkills += 2;
      else if (responses[21] === 'variable') healthSkills += 1;
      if (responses[22] === 'yes') healthSkills += 2;
      else if (responses[22] === 'unbalanced') healthSkills += 1;
      if (responses[24] === 'rarely') healthSkills += 3;
      else if (responses[24] === 'sometimes') healthSkills += 2;
      else if (responses[24] === 'often') healthSkills += 1;
      if (responses[23] === 'yes_helpful') healthSkills += 2;
      else if (responses[23] === 'interested') healthSkills += 1;
      if (responses[29] === 'no') healthSkills += 2;
      else if (responses[29] === 'occasional') healthSkills += 1;

      let housingSkills = 0;
      if (responses[8] === 'own_place') housingSkills += 3;
      else if (responses[8] === 'family') housingSkills += 2;
      else if (responses[8] === 'friend') housingSkills += 1;
      if (responses[2] === 'nothing') housingSkills += 2;
      else if (responses[2] === 'housing') housingSkills += 0;

      let citizenshipSkills = 0;
      if (responses[30] === 'no') citizenshipSkills += 3;
      else if (responses[30] === 'past') citizenshipSkills += 2;
      else if (responses[30] === 'current') citizenshipSkills += 1;
      if (responses[6] === 'regular') citizenshipSkills += 2;
      else if (responses[6] === 'occasional') citizenshipSkills += 1;
      if (responses[43] === 'team' || responses[43] === 'both') citizenshipSkills += 2;
      else if (responses[43] === 'alone') citizenshipSkills += 1;

      let cultureSkills = 0;
      if (responses[6] === 'regular') cultureSkills += 3;
      else if (responses[6] === 'occasional') cultureSkills += 2;
      else if (responses[6] === 'rarely') cultureSkills += 1;
      if (responses[42] === 'yes_eager') cultureSkills += 3;
      else if (responses[42] === 'depends') cultureSkills += 2;
      else if (responses[42] === 'maybe') cultureSkills += 1;
      if (responses[10] === 'creative') cultureSkills += 2;
      else if (responses[10] === 'social' || responses[10] === 'goals') cultureSkills += 1;

      let supportSkills = 0;
      if (responses[37] === 'know') supportSkills += 2;
      else if (responses[37] === 'heard') supportSkills += 1;
      if (responses[38] === 'regularly') supportSkills += 3;
      else if (responses[38] === 'sometimes') supportSkills += 2;
      else if (responses[38] === 'once') supportSkills += 1;
      if (responses[39] === 'support' || responses[39] === 'discovery') supportSkills += 2;
      else if (responses[39] === 'training' || responses[39] === 'job') supportSkills += 1;
      if (responses[4] === 'strong_support' || responses[4] === 'some_support') supportSkills += 2;
      else if (responses[4] === 'little_support') supportSkills += 1;
      if (responses[18] === 'ask_help') supportSkills += 2;
      else if (responses[18] === 'solve') supportSkills += 1;

      const thematicSkills = [
        { emoji: 'ğŸ’¼', label: 'Emploi', value: Math.min(5, Math.round((employmentSkills / 13) * 5)), description: 'Chercher et dÃ©crocher un emploi' },
        { emoji: 'ğŸ“š', label: 'Formation', value: Math.min(5, Math.round((trainingSkills / 16) * 5)), description: 'Se former et apprendre' },
        { emoji: 'ğŸš—', label: 'MobilitÃ©', value: Math.min(5, Math.round((mobilitySkills / 11) * 5)), description: 'Se dÃ©placer et Ãªtre mobile' },
        { emoji: 'ğŸ§­', label: 'Orientation', value: Math.min(5, Math.round((orientationSkills / 10) * 5)), description: 'Clarifier son projet' },
        { emoji: 'ï¿½ï¿½', label: 'Budget', value: Math.min(5, Math.round((budgetSkills / 9) * 5)), description: 'GÃ©rer son argent' },
        { emoji: 'ğŸ’»', label: 'NumÃ©rique', value: Math.min(5, Math.round((digitalSkills / 8) * 5)), description: 'MaÃ®triser les outils digitaux' },
        { emoji: 'ğŸ¥', label: 'SantÃ©', value: Math.min(5, Math.round((healthSkills / 14) * 5)), description: 'Prendre soin de soi' },
        { emoji: 'ğŸ ', label: 'Logement', value: Math.min(5, Math.round((housingSkills / 5) * 5)), description: 'Avoir un lieu stable' },
        { emoji: 'ğŸ—³ï¸', label: 'CitoyennetÃ©', value: Math.min(5, Math.round((citizenshipSkills / 7) * 5)), description: 'S\'engager et participer' },
        { emoji: 'ğŸ¨', label: 'Culture', value: Math.min(5, Math.round((cultureSkills / 8) * 5)), description: 'S\'ouvrir Ã  la culture' },
        { emoji: 'ğŸ¤', label: 'Accompagnement', value: Math.min(5, Math.round((supportSkills / 10) * 5)), description: 'Solliciter de l\'aide' }
      ];

      const improvements = [];
      lifeSkills.forEach(skill => {
        if (skill.value <= 2) {
          improvements.push({ emoji: skill.emoji, title: skill.label, description: skill.description });
        }
      });

      if (improvements.length === 0) {
        improvements.push({ emoji: 'â­', title: 'Continue comme Ã§a !', description: 'Tu es sur une bonne dynamique, garde le cap' });
      }

      const avgLifeSkills = lifeSkills.reduce((sum, skill) => sum + skill.value, 0) / lifeSkills.length;
      const wellbeingValue = lifeSkills.find(s => s.label === 'Bien-Ãªtre').value;

      if (avgLifeSkills < 2.5 || wellbeingValue <= 2 || responses[13] === 'health' || responses[24] === 'always' || responses[24] === 'often') {
        return {
          title: "ğŸ¤ Besoin d'Accompagnement RenforcÃ©",
          subtitle: "On avance ensemble, pas Ã  pas",
          lifeSkills,
          thematicSkills,
          improvements,
          parcours: [
            { emoji: 'ğŸ’ª', title: 'Reprendre confiance en soi', description: 'Ateliers bienveillants pour retrouver confiance et estime de soi progressivement', tags: ['Bien-Ãªtre', 'Confiance', '6 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ§˜', title: 'Gestion du stress et bien-Ãªtre', description: 'Techniques simples pour gÃ©rer le stress et l\'anxiÃ©tÃ© au quotidien', tags: ['SantÃ©', 'Bien-Ãªtre', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ‘¥', title: 'Ateliers collectifs et Ã©changes', description: 'Rencontrer d\'autres jeunes dans un cadre convivial et sans pression', tags: ['Social', 'Groupe', '5 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
          ]
        };
      }

      const orientationValue = thematicSkills.find(s => s.label === 'Orientation').value;

      if (orientationValue <= 2 || responses[14] === 'no_idea' || responses[40] === 'no_idea') {
        return {
          title: "ğŸ—ºï¸ En Phase de DÃ©couverte",
          subtitle: "Explorer pour trouver ta voie",
          lifeSkills,
          thematicSkills,
          improvements,
          parcours: [
            { emoji: 'ğŸ”', title: 'DÃ©couvrir les mÃ©tiers', description: 'Explorer diffÃ©rents secteurs et mÃ©tiers qui recrutent de faÃ§on ludique', tags: ['Orientation', 'DÃ©couverte', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ§­', title: 'Identifier ses compÃ©tences', description: 'DÃ©couvrir ce que tu sais faire et ce qui te plaÃ®t vraiment', tags: ['Bilan', 'Orientation', '5 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ¨', title: 'Ateliers crÃ©atifs et pratiques', description: 'Essayer diffÃ©rentes activitÃ©s pour dÃ©couvrir de nouvelles passions', tags: ['CrÃ©ativitÃ©', 'DÃ©couverte', '3 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
          ]
        };
      }

      const trainingValue = thematicSkills.find(s => s.label === 'Formation').value;
      const valorizationValue = lifeSkills.find(s => s.label === 'Valorisation de soi').value;

      if (orientationValue >= 3 && (responses[15] === 'motivated' || responses[15] === 'maybe') && valorizationValue <= 3) {
        return {
          title: "ğŸ”§ DÃ©veloppeurÂ·se de CompÃ©tences",
          subtitle: "PrÃªtÂ·e Ã  apprendre et progresser",
          lifeSkills,
          thematicSkills,
          improvements,
          parcours: [
            { emoji: 'ğŸŒ', title: 'CompÃ©tences numÃ©riques de base', description: 'MaÃ®triser les outils digitaux essentiels pour le monde du travail', tags: ['NumÃ©rique', 'Formation', '5 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ—£ï¸', title: 'Communication professionnelle', description: 'Savoir se prÃ©senter, communiquer et travailler en Ã©quipe', tags: ['Soft skills', 'Communication', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ’¼', title: 'Techniques de recherche d\'emploi', description: 'CV, lettres, entretiens : tous les outils pour rÃ©ussir', tags: ['Emploi', 'MÃ©thode', '3 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
          ]
        };
      }

      const personalityValue = lifeSkills.find(s => s.label === 'PersonnalitÃ©').value;
      const supportValue = thematicSkills.find(s => s.label === 'Accompagnement').value;

      if (supportValue <= 2 && personalityValue >= 3) {
        return {
          title: "ğŸ‘¥ CrÃ©ateurÂ·rice de Liens",
          subtitle: "S'ouvrir aux autres pour avancer",
          lifeSkills,
          thematicSkills,
          improvements,
          parcours: [
            { emoji: 'ğŸ¤', title: 'Ateliers collectifs et rencontres', description: 'Rencontrer d\'autres jeunes et crÃ©er du lien dans un cadre sympa', tags: ['Social', 'Groupe', '5 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ­', title: 'Expression et prise de parole', description: 'S\'exprimer plus facilement et gagner en aisance relationnelle', tags: ['Communication', 'Confiance', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ’¼', title: 'Travailler en Ã©quipe', description: 'DÃ©couvrir les codes du travail collectif Ã  travers des projets', tags: ['Travail', 'Collectif', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
          ]
        };
      }

      if (avgLifeSkills >= 3.5 && personalityValue >= 4) {
        return {
          title: "ï¿½ï¿½ï¿½ PrÃªtÂ·e Ã  Passer Ã  l'Action",
          subtitle: "Tu as les atouts pour y arriver !",
          lifeSkills,
          thematicSkills,
          improvements,
          parcours: [
            { emoji: 'ğŸ¯', title: 'Construire son projet professionnel', description: 'Structurer ton projet et le rendre concret avec un plan d\'action', tags: ['Orientation', 'Projet', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ï¿½ï¿½ï¿½ï¿½', title: 'Techniques de recherche avancÃ©es', description: 'Optimiser ton CV, ta lettre et tes entretiens pour te dÃ©marquer', tags: ['Emploi', 'CompÃ©tences', '3 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
            { emoji: 'ğŸ’¡', title: 'Entrepreneuriat et auto-emploi', description: 'CrÃ©er ton activitÃ© et devenir autonome professionnellement', tags: ['Entrepreneuriat', 'Projet', '6 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
          ]
        };
      }

      return {
        title: "ğŸ“ En Transition",
        subtitle: "Un parcours adaptÃ© Ã  ton rythme",
        lifeSkills,
        thematicSkills,
        improvements,
        parcours: [
          { emoji: 'ğŸ¯', title: 'Construire son parcours', description: 'Structurer ton projet professionnel Ã©tape par Ã©tape sans pression', tags: ['Orientation', 'Projet', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
          { emoji: 'ï¿½ï¿½', title: 'Premiers pas vers l\'emploi', description: 'Les bases du CV, de la candidature et de l\'entretien', tags: ['Emploi', 'DÃ©butant', '4 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' },
          { emoji: 'ğŸŒŸ', title: 'Valoriser ses expÃ©riences', description: 'Transformer toutes tes activitÃ©s en compÃ©tences valorisables', tags: ['CompÃ©tences', 'Valorisation', '3 sÃ©ances'], link: 'https://mlpb-tools.my.canva.site/mini-parcours-th-matiques' }
        ]
      };
    }

    function restartQuiz() {
      document.getElementById('resultsScreen').classList.remove('active');
      document.getElementById('welcomeScreen').style.display = 'block';
      document.getElementById('progressFill').style.width = '0%';
      sessionId = null;
      currentStep = 0;
      responses = {};
    }

    document.addEventListener('DOMContentLoaded', () => {
      initializeApp();
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a88ffc330a56cdf',t:'MTc2NDgyNzE0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

<!doctype html>
<html lang="fr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagnostic Life Skills - Mission Locale</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Helvetica', 'Arial Black', 'Impact', sans-serif;
            margin: 0;
            padding: 20px;
            background: 
                repeating-linear-gradient(
                    45deg,
                    #1a1a1a,
                    #1a1a1a 2px,
                    #2a2a2a 2px,
                    #2a2a2a 4px
                ),
                radial-gradient(circle at 30% 70%, rgba(214, 11, 82, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(214, 11, 82, 0.2) 0%, transparent 40%),
                #0a0a0a;
            min-height: 100%;
            color: #ffffff;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23333333' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='1'/%3E%3Ccircle cx='53' cy='53' r='1'/%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/svg%3E"),
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 98px,
                    rgba(214, 11, 82, 0.1) 100px
                );
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%),
                #1a1a1a;
            border: 2px solid #d60b52;
            border-radius: 0;
            box-shadow: 
                0 0 20px rgba(214, 11, 82, 0.3),
                inset 0 0 30px rgba(255,255,255,0.05);
            overflow: hidden;
            position: relative;
            z-index: 2;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            width: 100px;
            height: 100px;
            background: 
                radial-gradient(circle, #d60b52 30%, transparent 31%),
                radial-gradient(circle, #d60b52 35%, transparent 36%);
            background-size: 20px 20px, 15px 15px;
            opacity: 0.3;
            pointer-events: none;
            z-index: -1;
        }

        .container::after {
            content: '';
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            background: 
                repeating-linear-gradient(
                    45deg,
                    #d60b52,
                    #d60b52 2px,
                    transparent 2px,
                    transparent 8px
                );
            opacity: 0.2;
            pointer-events: none;
            z-index: -1;
        }

        .header {
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.2) 0%, transparent 50%),
                repeating-linear-gradient(
                    90deg,
                    #000000,
                    #000000 1px,
                    #1a1a1a 1px,
                    #1a1a1a 3px
                ),
                #000000;
            color: #ffffff;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            border-radius: 0;
            border-bottom: 3px solid #d60b52;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            width: 200px;
            height: 100px;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 5px,
                    rgba(214, 11, 82, 0.3) 5px,
                    rgba(214, 11, 82, 0.3) 10px
                );
            pointer-events: none;
            z-index: 1;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 150px;
            height: 80px;
            background: 
                radial-gradient(circle, rgba(214, 11, 82, 0.4) 20%, transparent 21%),
                radial-gradient(circle, rgba(214, 11, 82, 0.2) 25%, transparent 26%);
            background-size: 15px 15px, 25px 25px;
            pointer-events: none;
            z-index: 1;
        }

        .logo-container {
            position: absolute;
            top: 20px;
            right: 30px;
            width: 120px;
            height: 60px;
            background: #ffffff;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 3;
            padding: 8px;
        }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .logo-left {
            position: absolute;
            top: 20px;
            left: 30px;
            width: 140px;
            height: 40px;
            background: #ffffff;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 3;
            padding: 8px;
        }

        .logo-left img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .header h1 {
            margin: 0 0 20px 0;
            font-size: 3.2em;
            font-weight: 900;
            font-family: 'Helvetica', 'Arial Black', 'Impact', sans-serif;
            letter-spacing: 2px;
            position: relative;
            z-index: 2;
            text-shadow: 
                2px 2px 0px #000000,
                4px 4px 0px #d60b52,
                6px 6px 10px rgba(0,0,0,0.5);
            text-transform: uppercase;
            color: #ffffff;
        }

        .header p {
            margin: 0;
            font-size: 1.3em;
            font-weight: 700;
            opacity: 0.95;
            position: relative;
            z-index: 2;
            font-family: 'Helvetica', 'Arial Black', sans-serif;
            text-shadow: 1px 1px 0px #000000;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .content {
            padding: 50px 40px;
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.05) 0%, transparent 50%),
                repeating-linear-gradient(
                    0deg,
                    #1a1a1a,
                    #1a1a1a 2px,
                    #2a2a2a 2px,
                    #2a2a2a 4px
                ),
                #1a1a1a;
            position: relative;
            color: #ffffff;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .intro-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .intro-section h2 {
            color: #ffffff;
            margin-bottom: 30px;
            font-size: 2.8em;
            font-weight: 900;
            font-family: 'Helvetica', 'Arial Black', 'Impact', sans-serif;
            letter-spacing: 2px;
            text-align: center;
            position: relative;
            text-transform: uppercase;
            text-shadow: 
                2px 2px 0px #000000,
                4px 4px 0px #d60b52,
                6px 6px 10px rgba(0,0,0,0.5);
        }

        .intro-section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: 
                repeating-linear-gradient(
                    90deg,
                    #d60b52,
                    #d60b52 10px,
                    #ffffff 10px,
                    #ffffff 20px
                );
            border-radius: 0;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 700;
            color: #ffffff;
            font-size: 1.1em;
            font-family: 'Helvetica', 'Arial Black', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 1px 1px 0px #000000;
        }

        .form-group input {
            width: 100%;
            padding: 18px 25px;
            border: 2px solid #d60b52;
            border-radius: 0;
            font-size: 16px;
            font-weight: 600;
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%),
                #000000;
            color: #ffffff;
            transition: all 0.3s ease;
            box-shadow: 
                0 0 10px rgba(214, 11, 82, 0.2),
                inset 0 0 15px rgba(255,255,255,0.05);
            font-family: 'Helvetica', sans-serif;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ffffff;
            box-shadow: 
                0 0 15px rgba(214, 11, 82, 0.4),
                inset 0 0 20px rgba(255,255,255,0.1);
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.2) 0%, transparent 50%),
                #000000;
        }

        .form-group input::placeholder {
            color: #999999;
            font-style: normal;
            text-transform: uppercase;
            font-size: 0.9em;
        }

        .domain-section {
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%),
                #000000;
            border: 2px solid #d60b52;
            border-radius: 0;
            padding: 40px;
            margin-bottom: 40px;
            position: relative;
            box-shadow: 
                0 0 20px rgba(214, 11, 82, 0.3),
                inset 0 0 30px rgba(255,255,255,0.05);
            overflow: hidden;
        }

        .domain-section::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 80px;
            height: 80px;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 3px,
                    rgba(214, 11, 82, 0.2) 3px,
                    rgba(214, 11, 82, 0.2) 6px
                );
            pointer-events: none;
        }

        .domain-section::after {
            content: '';
            position: absolute;
            bottom: 10px;
            left: 10px;
            width: 60px;
            height: 60px;
            background: 
                radial-gradient(circle, rgba(214, 11, 82, 0.3) 30%, transparent 31%),
                radial-gradient(circle, rgba(214, 11, 82, 0.2) 35%, transparent 36%);
            background-size: 10px 10px, 15px 15px;
            pointer-events: none;
        }

        .domain-title {
            font-size: 2em;
            font-weight: 900;
            color: #ffffff;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            font-family: 'Helvetica', 'Arial Black', 'Impact', sans-serif;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 
                2px 2px 0px #000000,
                4px 4px 0px #d60b52;
        }

        .domain-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .domain-objective {
            background: rgba(214, 11, 82, 0.1);
            border-left: 4px solid #d60b52;
            padding: 15px 20px;
            margin-bottom: 30px;
            font-style: italic;
            color: #ffffff;
            border-radius: 0 8px 8px 0;
            position: relative;
            z-index: 1;
        }

        .question {
            margin-bottom: 20px;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 20px;
            color: #ffffff;
            font-size: 1.1em;
            font-family: 'Helvetica', sans-serif;
            line-height: 1.5;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 0px #000000;
        }

        .rating-scale {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 15px 10px;
            border: 3px solid transparent;
            border-radius: 15px;
            transition: all 0.3s ease;
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%),
                #000000;
            position: relative;
            overflow: hidden;
        }

        .rating-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(214, 11, 82, 0.1) 2px,
                    rgba(214, 11, 82, 0.1) 4px
                );
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .rating-option:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 8px 20px rgba(0,0,0,0.3),
                inset 0 0 15px rgba(255,255,255,0.1);
        }

        .rating-option:hover::before {
            opacity: 1;
        }

        .rating-option input[type="radio"] {
            margin-bottom: 10px;
            transform: scale(1.3);
        }

        .rating-option:has(input[type="radio"]:checked) {
            transform: translateY(-5px);
            box-shadow: 
                0 12px 25px rgba(0,0,0,0.4),
                inset 0 0 20px rgba(255,255,255,0.2);
        }

        .rating-option:has(input[type="radio"]:checked)::before {
            opacity: 1;
        }

        .rating-option:has(input[type="radio"]:checked) .rating-label {
            color: #ffffff;
            font-weight: 900;
            text-shadow: 2px 2px 0px #000000;
        }

        /* Couleurs sp√©cifiques par niveau */
        .rating-option[data-value="1"] {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            border-color: #ef4444;
        }

        .rating-option[data-value="2"] {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-color: #fbbf24;
        }

        .rating-option[data-value="3"] {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #34d399;
        }

        .rating-option[data-value="4"] {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-color: #a78bfa;
        }

        .rating-option[data-value="1"]:hover {
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.4), inset 0 0 15px rgba(255,255,255,0.1);
        }

        .rating-option[data-value="2"]:hover {
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4), inset 0 0 15px rgba(255,255,255,0.1);
        }

        .rating-option[data-value="3"]:hover {
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4), inset 0 0 15px rgba(255,255,255,0.1);
        }

        .rating-option[data-value="4"]:hover {
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4), inset 0 0 15px rgba(255,255,255,0.1);
        }

        .rating-option[data-value="1"]:has(input[type="radio"]:checked) {
            box-shadow: 0 12px 25px rgba(220, 38, 38, 0.5), inset 0 0 20px rgba(255,255,255,0.2);
        }

        .rating-option[data-value="2"]:has(input[type="radio"]:checked) {
            box-shadow: 0 12px 25px rgba(245, 158, 11, 0.5), inset 0 0 20px rgba(255,255,255,0.2);
        }

        .rating-option[data-value="3"]:has(input[type="radio"]:checked) {
            box-shadow: 0 12px 25px rgba(16, 185, 129, 0.5), inset 0 0 20px rgba(255,255,255,0.2);
        }

        .rating-option[data-value="4"]:has(input[type="radio"]:checked) {
            box-shadow: 0 12px 25px rgba(139, 92, 246, 0.5), inset 0 0 20px rgba(255,255,255,0.2);
        }

        .rating-label {
            font-size: 0.9em;
            text-align: center;
            color: #ffffff;
            font-weight: 600;
            text-shadow: 1px 1px 0px #000000;
            line-height: 1.3;
            font-family: 'Helvetica', 'Arial Black', sans-serif;
        }

        .btn {
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.2) 0%, transparent 50%),
                #d60b52;
            color: #ffffff;
            border: 2px solid #ffffff;
            padding: 18px 35px;
            border-radius: 0;
            font-size: 16px;
            font-weight: 900;
            font-family: 'Helvetica', 'Arial Black', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 0 15px rgba(214, 11, 82, 0.4),
                inset 0 0 20px rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 1px 1px 0px #000000;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(255,255,255,0.2) 2px,
                    rgba(255,255,255,0.2) 4px
                );
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            background: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                #ffffff;
            color: #d60b52;
            border-color: #d60b52;
            transform: translateY(-2px);
            box-shadow: 
                0 0 20px rgba(214, 11, 82, 0.6),
                inset 0 0 25px rgba(214, 11, 82, 0.1);
            text-shadow: none;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: #333333;
            color: #999999;
            border-color: #666666;
            box-shadow: none;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #1ABC9C 0%, #16A085 100%);
            box-shadow: 0 8px 25px rgba(26, 188, 156, 0.3);
            margin-right: 15px;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #16A085 0%, #1ABC9C 100%);
            box-shadow: 0 12px 35px rgba(26, 188, 156, 0.4);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #F5F5F5;
            border-radius: 10px;
            margin-bottom: 40px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFC107 0%, #1ABC9C 50%, #C62828 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes slideInDown {
            0% {
                transform: translateY(-100%);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideOutUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-100%);
                opacity: 0;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes fadeInUp {
            0% {
                transform: translateY(20px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .results-section {
            text-align: center;
        }

        .radar-container {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .chart-container {
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%),
                #1a1a1a;
            border: 2px solid #d60b52;
            border-radius: 0;
            padding: 25px;
            margin: 15px;
            flex: 1;
            min-width: 300px;
            box-shadow: 
                0 0 20px rgba(214, 11, 82, 0.3),
                inset 0 0 30px rgba(255,255,255,0.05);
        }

        .chart-title {
            font-weight: 900;
            margin-bottom: 20px;
            color: #ffffff;
            font-size: 1.4em;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px #000000;
        }

        .life-skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .skill-card {
            background: #ffffff;
            padding: 25px;
            border-radius: 20px;
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .skill-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.12);
        }

        .skill-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #FFC107 0%, #1ABC9C 50%, #C62828 100%);
        }

        .skill-name {
            font-weight: 600;
            margin-bottom: 12px;
            color: #333333;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1em;
        }

        .skill-score {
            font-size: 2em;
            font-weight: 700;
            color: #C62828;
            font-family: 'Montserrat', sans-serif;
        }

        .domain-bars {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .domain-bar {
            background: 
                linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%),
                #000000;
            padding: 18px;
            border: 2px solid #d60b52;
            border-radius: 0;
            box-shadow: 
                0 0 10px rgba(214, 11, 82, 0.2),
                inset 0 0 15px rgba(255,255,255,0.05);
        }

        .domain-bar-name {
            font-weight: 900;
            margin-bottom: 10px;
            font-size: 1em;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 1px 1px 0px #000000;
        }

        .bar-container {
            background: #1a1a1a;
            height: 24px;
            border: 1px solid #d60b52;
            border-radius: 0;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }

        .bar-fill {
            height: 100%;
            background: 
                linear-gradient(90deg, #d60b52 0%, #ffffff 50%, #d60b52 100%);
            transition: width 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000000;
            font-weight: 900;
            font-size: 0.9em;
            text-shadow: 1px 1px 0px #ffffff;
            position: relative;
        }

        .bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(0,0,0,0.1) 2px,
                    rgba(0,0,0,0.1) 4px
                );
        }

        .priority-areas {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 138, 101, 0.1) 100%);
            border: 2px solid #FFC107;
            border-radius: 25px;
            padding: 35px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(255, 193, 7, 0.15);
            position: relative;
            overflow: hidden;
        }

        .priority-areas::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255, 138, 101, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        .priority-title {
            color: #C62828;
            font-weight: 700;
            margin-bottom: 20px;
            font-size: 1.6em;
            font-family: 'Montserrat', sans-serif;
            position: relative;
            z-index: 1;
        }

        .action-plan {
            background: linear-gradient(135deg, rgba(26, 188, 156, 0.1) 0%, rgba(255, 255, 255, 0.8) 100%);
            border: 2px solid #1ABC9C;
            border-radius: 25px;
            padding: 35px;
            margin: 30px 0;
            text-align: left;
            box-shadow: 0 10px 30px rgba(26, 188, 156, 0.15);
            position: relative;
            overflow: hidden;
        }

        .action-plan::before {
            content: '';
            position: absolute;
            bottom: -40px;
            left: -40px;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, rgba(26, 188, 156, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        .action-title {
            color: #C62828;
            font-weight: 700;
            margin-bottom: 25px;
            font-size: 1.6em;
            font-family: 'Montserrat', sans-serif;
            position: relative;
            z-index: 1;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #e5e7eb;
            border-top: 4px solid #4f46e5;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .saved-assessments {
            background: #f0f9ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .assessment-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .assessment-info {
            flex: 1;
        }

        .assessment-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .assessment-date {
            color: #6b7280;
            font-size: 0.9em;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        .activity-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #10b981;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .activity-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .activity-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .activity-title {
            font-size: 1.4em;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
        }

        .activity-subtitle {
            color: #6b7280;
            margin: 5px 0 0 0;
        }

        .activity-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .meta-item {
            background: #f3f4f6;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .activity-steps {
            margin: 20px 0;
        }

        .activity-steps h4 {
            color: #374151;
            margin-bottom: 15px;
        }

        .step-list {
            list-style: none;
            padding: 0;
        }

        .step-item {
            background: #f8fafc;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 3px solid #10b981;
        }

        .transfer-note {
            background: #e0f2fe;
            border: 1px solid #0288d1;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .transfer-title {
            font-weight: 600;
            color: #01579b;
            margin-bottom: 5px;
        }

        .skills-tags {
            display: flex;
            gap: 8px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .skill-tag {
            background: #ddd6fe;
            color: #5b21b6;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 14px;
            }

            .container {
                margin: 0;
                border-radius: 0;
                min-height: calc(100% - 20px);
            }
            
            .header {
                padding: 30px 20px;
                position: relative;
            }

            .logo-container, .logo-left {
                position: static;
                width: 100%;
                max-width: 200px;
                margin: 0 auto 20px auto;
                height: 50px;
            }

            .logo-left {
                margin-bottom: 10px;
            }

            .header h1 {
                font-size: 2.2em;
                margin: 20px 0 15px 0;
                line-height: 1.2;
                text-align: center;
            }

            .header p {
                font-size: 1.1em;
                text-align: center;
            }
            
            .content {
                padding: 25px 15px;
            }

            .intro-section h2 {
                font-size: 2.2em;
                line-height: 1.2;
                margin-bottom: 20px;
            }

            .intro-section p {
                font-size: 1em;
                line-height: 1.5;
                margin-bottom: 25px;
            }

            .form-group {
                margin-bottom: 20px;
            }

            .form-group label {
                font-size: 1em;
                margin-bottom: 8px;
            }

            .form-group input {
                padding: 15px 20px;
                font-size: 16px;
                border-width: 2px;
            }

            .domain-section {
                padding: 25px 20px;
                margin-bottom: 25px;
            }

            .domain-title {
                font-size: 1.6em;
                margin-bottom: 25px;
                text-align: center;
                flex-direction: column;
                gap: 10px;
            }

            .domain-icon {
                font-size: 2em;
                margin-right: 0;
                margin-bottom: 5px;
            }

            .domain-objective {
                padding: 12px 15px;
                margin-bottom: 20px;
                font-size: 0.9em;
            }

            .question {
                margin-bottom: 25px;
                background: rgba(214, 11, 82, 0.05);
                padding: 20px;
                border-radius: 10px;
                border: 1px solid rgba(214, 11, 82, 0.2);
            }

            .question-text {
                font-size: 1em;
                margin-bottom: 15px;
                line-height: 1.4;
                text-align: center;
            }
            
            .rating-scale {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin: 15px 0;
            }

            .rating-option {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 15px 12px;
                border: 3px solid transparent;
                border-radius: 12px;
                transition: all 0.3s ease;
            }

            .rating-option[data-value="1"] {
                background: linear-gradient(135deg, #dc2626, #b91c1c);
                border-color: #ef4444;
            }

            .rating-option[data-value="2"] {
                background: linear-gradient(135deg, #f59e0b, #d97706);
                border-color: #fbbf24;
            }

            .rating-option[data-value="3"] {
                background: linear-gradient(135deg, #10b981, #059669);
                border-color: #34d399;
            }

            .rating-option[data-value="4"] {
                background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                border-color: #a78bfa;
            }

            .rating-option:hover {
                transform: translateY(-2px);
            }

            .rating-option[data-value="1"]:hover {
                box-shadow: 0 6px 15px rgba(220, 38, 38, 0.4), inset 0 0 10px rgba(255,255,255,0.1);
            }

            .rating-option[data-value="2"]:hover {
                box-shadow: 0 6px 15px rgba(245, 158, 11, 0.4), inset 0 0 10px rgba(255,255,255,0.1);
            }

            .rating-option[data-value="3"]:hover {
                box-shadow: 0 6px 15px rgba(16, 185, 129, 0.4), inset 0 0 10px rgba(255,255,255,0.1);
            }

            .rating-option[data-value="4"]:hover {
                box-shadow: 0 6px 15px rgba(139, 92, 246, 0.4), inset 0 0 10px rgba(255,255,255,0.1);
            }

            .rating-option input[type="radio"] {
                margin: 0;
                transform: scale(1.4);
            }

            .rating-option:has(input[type="radio"]:checked) {
                transform: translateY(-3px);
            }

            .rating-option[data-value="1"]:has(input[type="radio"]:checked) {
                box-shadow: 0 8px 20px rgba(220, 38, 38, 0.5), inset 0 0 15px rgba(255,255,255,0.2);
            }

            .rating-option[data-value="2"]:has(input[type="radio"]:checked) {
                box-shadow: 0 8px 20px rgba(245, 158, 11, 0.5), inset 0 0 15px rgba(255,255,255,0.2);
            }

            .rating-option[data-value="3"]:has(input[type="radio"]:checked) {
                box-shadow: 0 8px 20px rgba(16, 185, 129, 0.5), inset 0 0 15px rgba(255,255,255,0.2);
            }

            .rating-option[data-value="4"]:has(input[type="radio"]:checked) {
                box-shadow: 0 8px 20px rgba(139, 92, 246, 0.5), inset 0 0 15px rgba(255,255,255,0.2);
            }

            .rating-option:has(input[type="radio"]:checked) .rating-label {
                color: #ffffff;
                font-weight: 900;
                text-shadow: 2px 2px 0px #000000;
            }

            .rating-label {
                font-size: 0.9em;
                color: #ffffff;
                font-weight: 600;
                text-shadow: 1px 1px 0px #000000;
                line-height: 1.2;
            }

            .btn {
                width: 100%;
                padding: 18px 25px;
                font-size: 16px;
                margin-bottom: 15px;
                text-align: center;
            }

            .btn-secondary {
                margin-right: 0;
                margin-bottom: 10px;
            }

            .progress-bar {
                height: 12px;
                margin-bottom: 30px;
                border-radius: 6px;
            }
            
            .life-skills-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .skill-card {
                padding: 20px;
                text-align: center;
            }

            .skill-name {
                font-size: 1.1em;
                margin-bottom: 10px;
            }

            .skill-score {
                font-size: 2.5em;
            }

            .domain-bars {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .domain-bar {
                padding: 15px;
            }

            .domain-bar-name {
                font-size: 0.9em;
                margin-bottom: 8px;
            }

            .bar-container {
                height: 28px;
            }

            .bar-fill {
                font-size: 0.85em;
            }

            .chart-container {
                margin: 10px 0;
                padding: 20px 15px;
                min-width: auto;
            }

            .chart-title {
                font-size: 1.2em;
                margin-bottom: 15px;
                text-align: center;
            }

            .radar-container {
                flex-direction: column;
                margin: 20px 0;
            }

            .priority-areas, .action-plan {
                padding: 25px 20px;
                margin: 20px 0;
                border-radius: 15px;
            }

            .priority-title, .action-title {
                font-size: 1.3em;
                margin-bottom: 15px;
                text-align: center;
            }

            .saved-assessments {
                padding: 15px;
                border-radius: 10px;
            }

            .assessment-item {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 15px;
            }

            .assessment-info {
                text-align: center;
            }

            .btn-small {
                width: 100%;
                padding: 12px 16px;
            }

            .activity-card {
                padding: 20px 15px;
                margin-bottom: 20px;
                border-radius: 10px;
            }

            .activity-meta {
                flex-direction: column;
                gap: 8px;
            }

            .activity-header {
                flex-direction: column;
                text-align: center;
                margin-bottom: 15px;
            }

            .activity-icon {
                margin-right: 0;
                margin-bottom: 10px;
                font-size: 2.5em;
            }

            .activity-title {
                font-size: 1.2em;
                margin-bottom: 5px;
            }

            .activity-subtitle {
                font-size: 0.9em;
            }

            .skills-tags {
                justify-content: center;
                margin: 10px 0;
            }

            .skill-tag {
                font-size: 0.75em;
                padding: 6px 10px;
            }

            .step-list {
                margin: 0;
            }

            .step-item {
                padding: 10px 12px;
                margin-bottom: 6px;
                font-size: 0.9em;
                line-height: 1.4;
            }

            .transfer-note {
                padding: 12px;
                margin-top: 12px;
                border-radius: 8px;
            }

            .transfer-title {
                font-size: 0.9em;
                margin-bottom: 3px;
            }

            .transfer-note p {
                font-size: 0.85em;
                line-height: 1.3;
                margin: 0;
            }

            .meta-item {
                padding: 8px 10px;
                font-size: 0.85em;
                text-align: center;
                border-radius: 6px;
            }

            /* Am√©lioration de la navigation mobile */
            .step {
                min-height: calc(100vh - 200px);
            }

            /* Messages d'erreur mobile */
            .inline-message {
                position: fixed;
                top: 10px;
                left: 10px;
                right: 10px;
                max-width: none;
                text-align: center;
                font-size: 14px;
                z-index: 1001;
            }

            /* Am√©lioration des focus states pour mobile */
            .form-group input:focus {
                transform: scale(1.02);
            }

            .rating-option input[type="radio"]:checked + .rating-label {
                color: #d60b52;
                font-weight: 700;
            }

            .rating-option:has(input[type="radio"]:checked) {
                background: rgba(214, 11, 82, 0.3);
                border-color: #d60b52;
                box-shadow: 0 0 10px rgba(214, 11, 82, 0.4);
            }

            /* Optimisation des textures pour mobile */
            .container::before,
            .container::after,
            .header::before,
            .header::after,
            .domain-section::before,
            .domain-section::after {
                display: none;
            }

            /* Simplification du background pour mobile */
            body::before {
                opacity: 0.3;
            }

            .header {
                background: 
                    linear-gradient(135deg, rgba(214, 11, 82, 0.3) 0%, transparent 50%),
                    #000000;
            }

            .content {
                background: 
                    linear-gradient(135deg, rgba(214, 11, 82, 0.05) 0%, transparent 50%),
                    #1a1a1a;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <div class="header">
    <div class="logo-left"><img src="https://static.wixstatic.com/media/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif/v1/fill/w_313,h_84,al_c,lg_1,q_80,enc_avif,quality_auto/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif" alt="Mission Locale Logo" onerror="this.src=''; this.alt='Logo Mission Locale indisponible'; this.style.display='none';">
    </div>
    <div class="logo-container"><img src="https://static.wixstatic.com/media/dd5dab_31e98305be67485d92cdb56f82c0e03f~mv2.png/v1/fill/w_560,h_224,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/LS4YOU_Logo.png" alt="LS4YOU Logo" onerror="this.src=''; this.alt='Logo LS4YOU indisponible'; this.style.display='none';">
    </div>
    <h1 id="toolTitle">Diagnostic Life Skills</h1>
    <p id="organizationName">Mission Locale Pays Basque</p>
   </div>
   <div class="content"><!-- √âtape 1: Accueil et assessments sauvegard√©s -->
    <div class="step active" id="step-welcome">
     <div class="intro-section">
      <h2>üéØ Bienvenue dans votre diagnostic Life Skills</h2>
      <p id="instructionsText">Ce diagnostic vous permettra d'identifier vos forces et vos besoins dans 11 domaines essentiels √† votre insertion professionnelle et sociale.</p>
      <div style="background: linear-gradient(135deg, rgba(214, 11, 82, 0.1) 0%, transparent 50%), #000000; border: 2px solid #d60b52; border-radius: 15px; padding: 25px; margin: 25px 0; text-align: left;">
       <h3 style="color: #ffffff; margin-bottom: 15px; font-size: 1.3em; text-transform: uppercase; letter-spacing: 1px;">üéÆ Comment √ßa marche ?</h3>
       <p style="color: #ffffff; margin-bottom: 15px; line-height: 1.5;">Pour chaque affirmation, choisissez l'option qui vous correspond le mieux :</p>
       <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0;">
        <div style="background: linear-gradient(135deg, #dc2626, #b91c1c); padding: 10px; border-radius: 8px; text-align: center; border: 2px solid #ef4444;"><strong style="color: #ffffff; text-shadow: 1px 1px 0px #000000;">üî¥ Zone de d√©fi</strong><br><small style="color: #fecaca;">C'est difficile pour moi</small>
        </div>
        <div style="background: linear-gradient(135deg, #f59e0b, #d97706); padding: 10px; border-radius: 8px; text-align: center; border: 2px solid #fbbf24;"><strong style="color: #ffffff; text-shadow: 1px 1px 0px #000000;">üü° En progression</strong><br><small style="color: #fde68a;">J'y arrive parfois</small>
        </div>
        <div style="background: linear-gradient(135deg, #10b981, #059669); padding: 10px; border-radius: 8px; text-align: center; border: 2px solid #34d399;"><strong style="color: #ffffff; text-shadow: 1px 1px 0px #000000;">üü¢ Plut√¥t au point</strong><br><small style="color: #a7f3d0;">Je me d√©brouille bien</small>
        </div>
        <div style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); padding: 10px; border-radius: 8px; text-align: center; border: 2px solid #a78bfa;"><strong style="color: #ffffff; text-shadow: 1px 1px 0px #000000;">‚≠ê C'est mon fort</strong><br><small style="color: #ddd6fe;">Je ma√Ætrise vraiment</small>
        </div>
       </div>
       <p style="color: #ffffff; margin-top: 15px; font-style: italic;">üí° Soyez honn√™te avec vous-m√™me, c'est le meilleur moyen d'identifier vos vraies forces et vos axes de progression !</p>
      </div>
     </div>
     <div class="saved-assessments" id="savedAssessments" style="display: none;">
      <h3>üìã Diagnostics pr√©c√©dents</h3>
      <div id="assessmentsList"></div>
     </div>
     <div class="form-group"><label for="participantName">Votre pr√©nom et nom :</label> <input type="text" id="participantName" placeholder="Ex: Marie Dupont" required>
     </div><button class="btn" onclick="startAssessment()">Commencer le diagnostic</button>
    </div><!-- √âtape 2: Questions par domaine -->
    <div class="step" id="step-assessment">
     <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
     </div>
     <div id="questionsContainer"></div>
     <div style="text-align: center; margin-top: 30px;"><button class="btn btn-secondary" onclick="previousDomain()" id="prevBtn" style="display: none;">Pr√©c√©dent</button> <button class="btn" onclick="nextDomain()" id="nextBtn">Suivant</button>
     </div>
    </div><!-- √âtape 3: R√©sultats -->
    <div class="step" id="step-results">
     <div class="results-section">
      <h2>üìä Vos r√©sultats Life Skills</h2>
      <div class="radar-container">
       <div class="chart-container">
        <div class="chart-title">
         üß† Comp√©tences Life Skills
        </div>
        <div class="life-skills-grid" id="lifeSkillsResults"></div>
       </div>
       <div class="chart-container">
        <div class="chart-title">
         üìà Domaines d'insertion
        </div>
        <div class="domain-bars" id="domainResults"></div>
       </div>
      </div>
      <div class="priority-areas" id="priorityAreas"></div>
      <div class="action-plan">
       <div class="action-title">
        üí¨ Questions pour le debrief avec votre conseiller
       </div>
       <div id="debriefQuestions">
        <p><strong>Ce que tu fais d√©j√† bien :</strong></p>
        <p><em>Quels sont tes points forts selon ces r√©sultats ? Dans quels domaines te sens-tu le plus √† l'aise ?</em></p>
        <p><strong>Ce qui te bloque :</strong></p>
        <p><em>Quels domaines te posent le plus de difficult√©s ? Qu'est-ce qui t'emp√™che d'avancer dans ces domaines ?</em></p>
        <p><strong>Ce qui pourrait t'aider maintenant :</strong></p>
        <p><em>De quoi aurais-tu besoin pour progresser ? Quelles actions concr√®tes pourrais-tu mettre en place ?</em></p>
       </div>
      </div>
      <div class="action-plan" id="actionPlan"></div>
      <div style="text-align: center; margin-top: 30px;"><button class="btn btn-secondary" onclick="restartAssessment()">Nouveau diagnostic</button> <button class="btn" onclick="saveResults()" id="saveBtn">Sauvegarder les r√©sultats</button> <button class="btn" onclick="showActivities()" style="margin-left: 15px; background: #10b981;">Voir les activit√©s</button>
      </div>
     </div>
    </div><!-- √âtape 4: Activit√©s par domaine -->
    <div class="step" id="step-activities">
     <div class="results-section">
      <h2>üéØ Activit√©s adapt√©es √† vos besoins</h2>
      <p>D√©couvrez des activit√©s pratiques pour d√©velopper vos comp√©tences dans les domaines prioritaires.</p>
      <div id="activitiesContainer"></div>
      <div style="text-align: center; margin-top: 30px;"><button class="btn btn-secondary" onclick="showStep('step-results')">Retour aux r√©sultats</button> <button class="btn" onclick="restartAssessment()">Nouveau diagnostic</button>
      </div>
     </div>
    </div>
    <div class="loading" id="loading">
     <div class="spinner"></div>
     <p>Sauvegarde en cours...</p>
    </div>
   </div>
  </div>
  <script>
        // Configuration des domaines et questions adapt√©es aux jeunes NEET
        const domains = [
            {
                name: "Emploi",
                icon: "üíº",
                objective: "√âvaluer la capacit√© √† se pr√©senter, comprendre les codes professionnels, demander de l'aide, se projeter dans le travail",
                questions: [
                    "M√™me sans dipl√¥me, je sais mettre en avant mes qualit√©s",
                    "Face √† un employeur, j'arrive √† expliquer pourquoi il devrait me recruter",
                    "Quand on me donne une mission, je comprends ce qu'on attend de moi",
                    "Si j'ai des difficult√©s au travail, j'ose demander de l'aide",
                    "Il y a au moins un type de m√©tier o√π je me projette"
                ],
                lifeSkills: {
                    "Personnalit√©": "motivation / choix / forces",
                    "Valorisation": "parler de soi / pitch",
                    "Bien-√™tre": "stress entretien, pression",
                    "Ressources": "salaire / contrats"
                }
            },
            {
                name: "Formation",
                icon: "üìö",
                objective: "√âvaluer concentration, pers√©v√©rance, rapport √† l'erreur, capacit√© √† poser des questions",
                questions: [
                    "M√™me si l'√©cole √©tait difficile, je peux me concentrer sur ce qui m'int√©resse",
                    "Je peux suivre une formation sur plusieurs jours sans abandonner",
                    "En cours, j'ose poser des questions si je ne comprends pas",
                    "Les examens me stressent mais ne me paralysent pas",
                    "Si une formation peut m'aider, je suis pr√™t¬∑e √† faire des efforts"
                ],
                lifeSkills: {
                    "Personnalit√©": "pers√©v√©rance / rapport √† l'effort",
                    "Valorisation": "reconnaissance des progr√®s",
                    "Bien-√™tre": "charge mentale / stress scolaire",
                    "Ressources": "aides formation"
                }
            },
            {
                name: "Orientation",
                icon: "üß≠",
                objective: "√âvaluer int√©r√™ts, valeurs, forces, id√©es d'avenir, flexibilit√©",
                questions: [
                    "J'ai au moins une id√©e de ce que je pourrais faire plus tard",
                    "Je sais ce qui me pla√Æt dans la vie, m√™me si ce n'est pas scolaire",
                    "Il y a des domaines o√π je me d√©brouille mieux que d'autres",
                    "J'ai le droit de me tromper et de changer de voie",
                    "M√™me dans l'incertitude, je vois quelques pistes pour avancer"
                ],
                lifeSkills: {
                    "Personnalit√©": "int√©r√™ts / valeurs",
                    "Valorisation": "confiance / identit√©",
                    "Bien-√™tre": "anxi√©t√© orientation",
                    "Ressources": "r√©alit√©s m√©tiers / contraintes"
                }
            },
            {
                name: "Mobilit√©",
                icon: "üöó",
                objective: "Observer organisation, autonomie, acc√®s aux transports, gestion stress d√©placements",
                questions: [
                    "Quand j'ai un rendez-vous important, j'arrive √† m'y rendre",
                    "J'ai au moins un moyen de me d√©placer (m√™me si c'est compliqu√©)",
                    "Si je dois aller quelque part de nouveau, je peux demander comment faire",
                    "Parfois les transports me posent des probl√®mes (argent, stress, organisation)",
                    "Je sais vers qui me tourner si j'ai un probl√®me de transport"
                ],
                lifeSkills: {
                    "Personnalit√©": "autonomie",
                    "Valorisation": "fiabilit√© (√™tre √† l'heure)",
                    "Bien-√™tre": "anxi√©t√© trajets",
                    "Ressources": "permis / co√ªt / r√©seau"
                }
            },
            {
                name: "Sant√©",
                icon: "‚ù§Ô∏è",
                objective: "√âvaluer √©nergie, stress, strat√©gies de r√©gulation, rep√©rage des signaux",
                questions: [
                    "En g√©n√©ral, j'ai l'√©nergie pour faire ce que j'ai √† faire",
                    "Je sens quand √ßa ne va pas dans ma t√™te ou mon corps",
                    "J'ai ma fa√ßon √† moi de d√©compresser quand √ßa va mal",
                    "Il y a au moins une personne √† qui je peux dire que √ßa ne va pas",
                    "Ma sant√© (physique ou mentale) me complique parfois les choses"
                ],
                lifeSkills: {
                    "Personnalit√©": "limites personnelles",
                    "Valorisation": "se sentir digne de soin",
                    "Bien-√™tre": "c≈ìur du domaine",
                    "Ressources": "acc√®s aux soins"
                }
            },
            {
                name: "Logement",
                icon: "üè°",
                objective: "Comprendre l'impact du logement sur le quotidien, la s√©curit√©, la capacit√© √† avancer",
                questions: [
                    "J'ai un endroit o√π dormir en s√©curit√©",
                    "Chez moi, je peux me reposer tranquillement quand j'en ai besoin",
                    "Mon logement me permet d'aller √† mes rendez-vous et activit√©s",
                    "Si ma situation de logement changeait, je saurais qui contacter"
                ],
                lifeSkills: {
                    "Personnalit√©": "estime ‚Äì je m√©rite un lieu stable",
                    "Valorisation": "capacit√© √† demander un accompagnement",
                    "Bien-√™tre": "sommeil / s√©curit√©",
                    "Ressources": "logement / dispositifs"
                }
            },
            {
                name: "Citoyennet√©",
                icon: "üî¥",
                objective: "√âvaluer l'expression, la participation, la capacit√© √† demander du soutien",
                questions: [
                    "Dans un petit groupe bienveillant, j'arrive √† dire ce que je pense",
                    "Il y a au moins un adulte qui m'√©coute vraiment",
                    "Je sais que j'ai des droits, m√™me si je ne connais pas tout",
                    "S'il y avait un projet qui m'int√©resse, je pourrais m'y investir"
                ],
                lifeSkills: {
                    "Personnalit√©": "sentiment d'agir",
                    "Valorisation": "place dans les groupes",
                    "Bien-√™tre": "environnement sain ou toxique",
                    "Ressources": "droits / participation"
                }
            },
            {
                name: "Finances",
                icon: "üí∂",
                objective: "Explorer compr√©hension du budget, aides, stress financier",
                questions: [
                    "Je sais combien j'ai d'argent par mois (m√™me si ce n'est pas beaucoup)",
                    "Je vois quand je vais avoir des difficult√©s financi√®res",
                    "Je peux parler d'argent avec quelqu'un sans avoir honte",
                    "Je sais qu'il y a des aides possibles (m√™me si je ne connais pas tout)",
                    "Le manque d'argent m'emp√™che parfois de faire certaines choses"
                ],
                lifeSkills: {
                    "Personnalit√©": "prise de d√©cision / priorisation",
                    "Valorisation": "sortir de la honte financi√®re",
                    "Bien-√™tre": "stress budget",
                    "Ressources": "aides / gestion"
                }
            },
            {
                name: "Loisirs",
                icon: "üé®",
                objective: "Rep√©rer activit√©s qui soutiennent l'√©quilibre et la motivation",
                questions: [
                    "J'ai au moins une activit√© que j'aime faire qui me fait du bien",
                    "Je prends du temps pour moi dans la semaine",
                    "De temps en temps, je teste de nouvelles activit√©s ou endroits",
                    "Mes activit√©s m'aident √† aller mieux ou √† avoir confiance",
                    "Je vois un lien entre ce que j'aime et ce que je pourrais faire plus tard"
                ],
                lifeSkills: {
                    "Personnalit√©": "go√ªts, talents",
                    "Valorisation": "parler de ses passions comme forces",
                    "Bien-√™tre": "r√©gulation √©motionnelle",
                    "Ressources": "acc√®s activit√©"
                }
            },
            {
                name: "Num√©rique",
                icon: "üì±",
                objective: "√âvaluer acc√®s aux outils, comp√©tences num√©riques essentielles, s√©curit√© en ligne",
                questions: [
                    "J'ai acc√®s √† un t√©l√©phone et internet quand j'en ai besoin",
                    "Je peux me d√©brouiller pour faire des d√©marches en ligne",
                    "Je sais chercher des informations utiles sur internet",
                    "Je fais attention √† ce que je poste sur les r√©seaux sociaux",
                    "Si j'ai des difficult√©s avec le num√©rique, je sais √† qui demander"
                ],
                lifeSkills: {
                    "Personnalit√©": "limites / choix / contr√¥le",
                    "Valorisation": "pr√©sence en ligne pro",
                    "Bien-√™tre": "gestion r√©seaux / pression sociale",
                    "Ressources": "acc√®s num√©rique / d√©marches"
                }
            },
            {
                name: "Mode de vie",
                icon: "‚è≥",
                objective: "Comprendre comment le rythme quotidien impacte projet, √©nergie et disponibilit√©",
                questions: [
                    "Mes horaires de sommeil me permettent de tenir le coup",
                    "Quand c'est important, j'arrive √† √™tre √† l'heure",
                    "Je note mes rendez-vous importants pour ne pas les oublier",
                    "J'arrive √† jongler entre mes diff√©rentes activit√©s",
                    "Je sais quand j'ai besoin de faire une pause et je le fais"
                ],
                lifeSkills: {
                    "Personnalit√©": "organisation personnelle / limites",
                    "Valorisation": "fiabilit√© / ponctualit√©",
                    "Bien-√™tre": "√©quilibre vie / r√©cup√©ration",
                    "Ressources": "gestion du temps / outils"
                }
            }
        ];

        // Mapping des domaines vers les comp√©tences Life Skills
        const lifeSkillsMapping = {
            "Personnalit√©": ["Orientation", "Sant√©", "Mode de vie"],
            "Valorisation": ["Emploi", "Formation", "Citoyennet√©"],
            "Bien-√™tre": ["Sant√©", "Logement", "Loisirs"],
            "Ressources": ["Mobilit√©", "Finances", "Num√©rique"]
        };

        // Activit√©s par domaine
        const domainActivities = {
            "Emploi": [
                {
                    title: "Mon Pitch en 30 secondes",
                    objective: "Apprendre √† parler de soi simplement",
                    skills: ["Valorisation", "Personnalit√©"],
                    duration: "45 min",
                    format: "Individuel + vid√©o",
                    steps: [
                        "Compl√©ter 3 phrases : 'Je suis...', 'On me reconna√Æt souvent pour...', 'Je suis dou√©¬∑e pour...'",
                        "Construire un pitch simple et authentique",
                        "Enregistrer une vid√©o de pr√©sentation",
                        "Recevoir des retours bienveillants du groupe"
                    ],
                    transfer: "Utile pour les entretiens d'embauche et pr√©sentations professionnelles"
                }
            ],
            "Formation": [
                {
                    title: "Le Feedback qui fait grandir",
                    objective: "Apprendre √† recevoir et demander un feedback",
                    skills: ["Valorisation", "Bien-√™tre"],
                    duration: "1h",
                    format: "Collectif + bin√¥mes",
                    steps: [
                        "Mini-jeu : identifier 'bon feedback / mauvais feedback'",
                        "Simulations en bin√¥me pour pratiquer",
                        "√âlaboration d'une action 'je progresse dans...'",
                        "Debrief collectif sur les apprentissages"
                    ],
                    transfer: "Am√©liore la capacit√© d'apprentissage et l'adaptation en formation"
                }
            ],
            "Orientation": [
                {
                    title: "Mon Mini Magazine de Vie (Zine)",
                    objective: "Faire √©merger centres d'int√©r√™t et valeurs",
                    skills: ["Personnalit√©", "Valorisation"],
                    duration: "1h30",
                    format: "Cr√©atif individuel",
                    steps: [
                        "D√©couper/coller des images refl√©tant la vie souhait√©e",
                        "Structurer en 4 pages : moi / mes forces / ce que j'aime / o√π je veux aller",
                        "Finaliser son magazine personnel",
                        "Pr√©sentation optionnelle au groupe"
                    ],
                    transfer: "Clarifie le projet de vie et facilite les choix d'orientation"
                }
            ],
            "Mobilit√©": [
                {
                    title: "Moi en D√©placement : choix & cons√©quences",
                    objective: "Comprendre l'impact de la mobilit√©",
                    skills: ["Ressources", "Organisation"],
                    duration: "45 min",
                    format: "Simulation pratique",
                    steps: [
                        "Choisir un sc√©nario : 'aller au travail', 'aller en formation', 'aller voir quelqu'un important'",
                        "Identifier les solutions possibles de transport",
                        "Calculer le co√ªt de chaque solution",
                        "Analyser les difficult√©s potentielles",
                        "D√©finir sa prochaine √©tape mobilit√© concr√®te"
                    ],
                    transfer: "Facilite l'acc√®s √† l'emploi et √† la formation en anticipant les contraintes"
                }
            ],
            "Sant√©": [
                {
                    title: "Mon Stressom√®tre",
                    objective: "Rep√©rer signes de stress + cr√©er un plan d'apaisement",
                    skills: ["Bien-√™tre", "Personnalit√©"],
                    duration: "1h",
                    format: "Auto-√©valuation + cr√©ation d'outils",
                    steps: [
                        "Auto-√©valuation de son niveau de stress actuel",
                        "Identifier son profil : zen / pressur√© / en alerte",
                        "Rep√©rer ses signaux personnels de stress",
                        "√âlaborer son 'kit apaisement' personnalis√©",
                        "Tester une technique d'apaisement imm√©diatement"
                    ],
                    transfer: "Am√©liore la performance en entretien et la gestion du quotidien"
                }
            ],
            "Logement": [
                {
                    title: "Mon Budget Logement",
                    objective: "Visualiser le co√ªt de la vie autonome",
                    skills: ["Ressources"],
                    duration: "45 min",
                    format: "Calcul pratique",
                    steps: [
                        "Rechercher et calculer le co√ªt d'un logement r√©el dans sa zone",
                        "Lister toutes les charges associ√©es (√©lectricit√©, internet, assurance...)",
                        "Comparer le co√ªt total avec ses ressources actuelles/futures",
                        "Identifier les ajustements possibles (colocation, aides, zone g√©ographique)",
                        "D√©finir un plan d'action logement r√©aliste"
                    ],
                    transfer: "Pr√©pare l'autonomie et s√©curise les conditions de vie pour l'insertion"
                }
            ],
            "Citoyennet√©": [
                {
                    title: "Ma Carte de Soutien",
                    objective: "Identifier son r√©seau d'aide",
                    skills: ["Valorisation", "Personnalit√©"],
                    duration: "1h",
                    format: "Cartographie + action",
                    steps: [
                        "Dessiner son r√©seau actuel (famille, amis, professionnels, institutions)",
                        "Ajouter les personnes positives et ressources",
                        "Identifier ses besoins d'aide actuels et futurs",
                        "Rep√©rer les manques dans son r√©seau",
                        "Action concr√®te : contacter 1 personne ressource cette semaine"
                    ],
                    transfer: "Facilite l'acc√®s aux opportunit√©s et au soutien dans l'insertion"
                }
            ],
            "Finances": [
                {
                    title: "Du Brut au Net",
                    objective: "Comprendre salaire + g√©rer budget",
                    skills: ["Ressources"],
                    duration: "1h",
                    format: "Simulation + planification",
                    steps: [
                        "Simuler un salaire net √† partir d'un salaire brut (charges sociales, imp√¥ts)",
                        "Lister toutes les d√©penses essentielles mensuelles",
                        "Calculer le reste √† vivre apr√®s les charges obligatoires",
                        "Construire un budget √©quilibr√© et r√©aliste",
                        "Identifier les marges de man≈ìuvre et d'√©pargne"
                    ],
                    transfer: "Pr√©pare √† la n√©gociation salariale et √† l'autonomie financi√®re"
                }
            ],
            "Loisirs": [
                {
                    title: "Mes Boosters de Bien-√ätre",
                    objective: "Identifier activit√©s qui donnent de l'√©nergie",
                    skills: ["Bien-√™tre"],
                    duration: "30 min",
                    format: "R√©flexion + planification",
                    steps: [
                        "Lister 'Ce qui me fait du bien' (activit√©s, lieux, personnes)",
                        "S√©lectionner 3 activit√©s faciles √† mettre en place",
                        "V√©rifier la faisabilit√© (co√ªt, temps, accessibilit√©)",
                        "Inscrire ces activit√©s dans un planning hebdomadaire",
                        "S'engager sur une premi√®re action dans les 48h"
                    ],
                    transfer: "Am√©liore l'√©quilibre vie pro/perso et maintient la motivation"
                }
            ],
            "Num√©rique": [
                {
                    title: "Mon Image en Ligne",
                    objective: "Ma√Ætriser identit√© num√©rique",
                    skills: ["Valorisation", "Ressources"],
                    duration: "1h",
                    format: "Audit + cr√©ation",
                    steps: [
                        "Google test : rechercher son nom et voir ce qui appara√Æt",
                        "Audit de ses profils sur les r√©seaux sociaux",
                        "Nettoyage rapide (photos inappropri√©es, statuts probl√©matiques)",
                        "Cr√©ation ou am√©lioration d'un profil professionnel simple",
                        "D√©finir sa strat√©gie de pr√©sence en ligne"
                    ],
                    transfer: "√âvite les √©cueils en recrutement et valorise son profil professionnel"
                }
            ],
            "Mode de vie": [
                {
                    title: "Ma Routine Qui Me Fait du Bien",
                    objective: "Cr√©er un mode de vie stable",
                    skills: ["Personnalit√©", "Bien-√™tre"],
                    duration: "45 min",
                    format: "Analyse + construction",
                    steps: [
                        "Identifier ses habitudes actuelles positives et n√©gatives",
                        "Choisir 1 changement utile et r√©alisable",
                        "Construire un plan quotidien simple et stable",
                        "D√©finir des indicateurs de r√©ussite",
                        "Pr√©voir les obstacles et solutions de contournement"
                    ],
                    transfer: "Am√©liore la r√©gularit√© et l'efficacit√© dans les d√©marches d'insertion"
                }
            ]
        };

        let currentDomain = 0;
        let responses = {};
        let currentRecordCount = 0;
        let allAssessments = [];

        // Configuration par d√©faut
        const defaultConfig = {
            tool_title: "Diagnostic Life Skills",
            organization_name: "Mission Locale Edition",
            instructions_text: "Ce diagnostic vous permettra d'identifier vos forces et vos besoins dans 11 domaines essentiels √† votre insertion professionnelle et sociale."
        };

        // Gestionnaire de donn√©es
        const dataHandler = {
            onDataChanged(data) {
                allAssessments = data;
                currentRecordCount = data.length;
                displaySavedAssessments();
            }
        };

        // Initialisation des SDKs
        async function initializeApp() {
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error("Erreur d'initialisation du SDK de donn√©es");
                }
            }

            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        const toolTitle = config.tool_title || defaultConfig.tool_title;
                        const orgName = config.organization_name || defaultConfig.organization_name;
                        const instructions = config.instructions_text || defaultConfig.instructions_text;

                        document.getElementById('toolTitle').textContent = toolTitle;
                        document.getElementById('organizationName').textContent = orgName;
                        document.getElementById('instructionsText').textContent = instructions;
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.primary_color || "#4f46e5",
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ primary_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.secondary_color || "#7c3aed",
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ secondary_color: value });
                                    }
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: {
                            get: () => config.font_family || "Segoe UI",
                            set: (value) => {
                                if (window.elementSdk) {
                                    window.elementSdk.setConfig({ font_family: value });
                                }
                            }
                        },
                        fontSizeable: {
                            get: () => config.font_size || 16,
                            set: (value) => {
                                if (window.elementSdk) {
                                    window.elementSdk.setConfig({ font_size: value });
                                }
                            }
                        }
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["tool_title", config.tool_title || defaultConfig.tool_title],
                        ["organization_name", config.organization_name || defaultConfig.organization_name],
                        ["instructions_text", config.instructions_text || defaultConfig.instructions_text]
                    ])
                });
            }
        }

        function displaySavedAssessments() {
            const container = document.getElementById('savedAssessments');
            const list = document.getElementById('assessmentsList');
            
            if (allAssessments.length === 0) {
                container.style.display = 'none';
                return;
            }

            container.style.display = 'block';
            list.innerHTML = '';

            allAssessments.forEach(assessment => {
                const item = document.createElement('div');
                item.className = 'assessment-item';
                
                const date = new Date(assessment.assessment_date);
                const formattedDate = date.toLocaleDateString('fr-FR');
                
                item.innerHTML = `
                    <div class="assessment-info">
                        <div class="assessment-name">${assessment.participant_name}</div>
                        <div class="assessment-date">Diagnostic du ${formattedDate}</div>
                    </div>
                    <button class="btn btn-small" onclick="viewAssessment('${assessment.__backendId}')">
                        Voir les r√©sultats
                    </button>
                `;
                
                list.appendChild(item);
            });
        }

        function viewAssessment(assessmentId) {
            const assessment = allAssessments.find(a => a.__backendId === assessmentId);
            if (!assessment) return;

            // Charger les donn√©es de l'assessment
            responses = JSON.parse(assessment.domain_scores);
            
            // Afficher les r√©sultats
            showResults();
            showStep('step-results');
        }

        function startAssessment() {
            const name = document.getElementById('participantName').value.trim();
            if (!name) {
                showInlineMessage('Veuillez saisir votre nom pour commencer.', 'error');
                return;
            }

            // R√©initialiser les donn√©es
            currentDomain = 0;
            responses = {};
            
            // G√©n√©rer les questions
            generateQuestions();
            showStep('step-assessment');
            updateProgress();
        }

        function generateQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            domains.forEach((domain, domainIndex) => {
                const domainDiv = document.createElement('div');
                domainDiv.className = 'domain-section';
                domainDiv.id = `domain-${domainIndex}`;
                domainDiv.style.display = domainIndex === 0 ? 'block' : 'none';

                domainDiv.innerHTML = `
                    <div class="domain-title">
                        <span class="domain-icon">${domain.icon}</span>
                        ${domain.name}
                    </div>
                    <div class="domain-objective">
                        <strong>üéØ Objectif :</strong> ${domain.objective}
                    </div>
                `;

                domain.questions.forEach((question, questionIndex) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    
                    const questionId = `q_${domainIndex}_${questionIndex}`;
                    
                    questionDiv.innerHTML = `
                        <div class="question-text">${question}</div>
                        <div class="rating-scale">
                            ${[1,2,3,4].map(value => `
                                <label class="rating-option" data-value="${value}">
                                    <input type="radio" name="${questionId}" value="${value}" onchange="updateResponse('${questionId}', ${value})">
                                    <span class="rating-label">${getRatingLabel(value)}</span>
                                </label>
                            `).join('')}
                        </div>
                    `;
                    
                    domainDiv.appendChild(questionDiv);
                });

                container.appendChild(domainDiv);
            });
        }

        function getRatingLabel(value) {
            const labels = {
                1: "üî¥ Zone de d√©fi",
                2: "üü° En progression", 
                3: "üü¢ Plut√¥t au point",
                4: "‚≠ê C'est mon fort"
            };
            return labels[value];
        }

        function getRatingColor(value) {
            const colors = {
                1: { bg: "linear-gradient(135deg, #dc2626, #b91c1c)", border: "#ef4444" },
                2: { bg: "linear-gradient(135deg, #f59e0b, #d97706)", border: "#fbbf24" },
                3: { bg: "linear-gradient(135deg, #10b981, #059669)", border: "#34d399" },
                4: { bg: "linear-gradient(135deg, #8b5cf6, #7c3aed)", border: "#a78bfa" }
            };
            return colors[value];
        }

        function updateResponse(questionId, value) {
            responses[questionId] = value;
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentDomain > 0 ? 'inline-block' : 'none';
            
            if (currentDomain === domains.length - 1) {
                const allAnswered = domains[currentDomain].questions.every((_, qIndex) => {
                    return responses[`q_${currentDomain}_${qIndex}`] !== undefined;
                });
                
                nextBtn.textContent = allAnswered ? 'Voir mes r√©sultats' : 'Terminer';
                nextBtn.disabled = !allAnswered;
            } else {
                nextBtn.textContent = 'Suivant';
                nextBtn.disabled = false;
            }
        }

        function nextDomain() {
            if (currentDomain < domains.length - 1) {
                // V√©rifier que toutes les questions du domaine actuel sont r√©pondues
                const allAnswered = domains[currentDomain].questions.every((_, qIndex) => {
                    return responses[`q_${currentDomain}_${qIndex}`] !== undefined;
                });
                
                if (!allAnswered) {
                    showInlineMessage('Veuillez r√©pondre √† toutes les questions avant de continuer.', 'warning');
                    return;
                }
                
                document.getElementById(`domain-${currentDomain}`).style.display = 'none';
                currentDomain++;
                document.getElementById(`domain-${currentDomain}`).style.display = 'block';
                updateProgress();
                updateNavigationButtons();
            } else {
                // Terminer l'√©valuation
                showResults();
                showStep('step-results');
            }
        }

        function previousDomain() {
            if (currentDomain > 0) {
                document.getElementById(`domain-${currentDomain}`).style.display = 'none';
                currentDomain--;
                document.getElementById(`domain-${currentDomain}`).style.display = 'block';
                updateProgress();
                updateNavigationButtons();
            }
        }

        function updateProgress() {
            const progress = ((currentDomain + 1) / domains.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function showResults() {
            // Calculer les scores par domaine
            const domainScores = {};
            domains.forEach((domain, domainIndex) => {
                const domainResponses = domain.questions.map((_, qIndex) => 
                    responses[`q_${domainIndex}_${qIndex}`] || 0
                );
                const average = domainResponses.reduce((a, b) => a + b, 0) / domainResponses.length;
                domainScores[domain.name] = Math.round((average / 4) * 100);
            });

            // Calculer les scores Life Skills
            const lifeSkillsScores = {};
            Object.keys(lifeSkillsMapping).forEach(skill => {
                const relatedDomains = lifeSkillsMapping[skill];
                const scores = relatedDomains.map(domainName => domainScores[domainName]);
                const average = scores.reduce((a, b) => a + b, 0) / scores.length;
                lifeSkillsScores[skill] = Math.round(average);
            });

            // Afficher les r√©sultats
            displayLifeSkillsResults(lifeSkillsScores);
            displayDomainResults(domainScores);
            displayPriorityAreas(domainScores);
            displayActionPlan(domainScores);
        }

        function displayLifeSkillsResults(scores) {
            const container = document.getElementById('lifeSkillsResults');
            container.innerHTML = '';

            Object.entries(scores).forEach(([skill, score]) => {
                const card = document.createElement('div');
                card.className = 'skill-card';
                card.innerHTML = `
                    <div class="skill-name">${skill}</div>
                    <div class="skill-score">${score}%</div>
                `;
                container.appendChild(card);
            });
        }

        function displayDomainResults(scores) {
            const container = document.getElementById('domainResults');
            container.innerHTML = '';

            Object.entries(scores).forEach(([domain, score]) => {
                const bar = document.createElement('div');
                bar.className = 'domain-bar';
                bar.innerHTML = `
                    <div class="domain-bar-name">${domain}</div>
                    <div class="bar-container">
                        <div class="bar-fill" style="width: ${score}%">${score}%</div>
                    </div>
                `;
                container.appendChild(bar);
            });
        }

        function displayPriorityAreas(scores) {
            const lowScoreAreas = Object.entries(scores)
                .filter(([_, score]) => score < 60)
                .sort((a, b) => a[1] - b[1])
                .map(([domain, score]) => ({ domain, score }));

            const container = document.getElementById('priorityAreas');
            
            if (lowScoreAreas.length === 0) {
                container.innerHTML = `
                    <div class="priority-title">üéâ F√©licitations !</div>
                    <p>Vous avez de bons scores dans tous les domaines. Continuez sur cette voie !</p>
                    <p><strong>Conseil :</strong> Choisissez 1 √† 2 domaines o√π vous souhaitez encore progresser pour atteindre l'excellence.</p>
                `;
                container.style.background = '#d1fae5';
                container.style.borderColor = '#10b981';
            } else {
                container.innerHTML = `
                    <div class="priority-title">üéØ Identifiez vos 1 √† 3 domaines prioritaires</div>
                    <p>Voici les domaines o√π vous pourriez concentrer vos efforts :</p>
                    <div style="margin: 15px 0;">
                        ${lowScoreAreas.map(({domain, score}) => `
                            <label style="display: block; margin: 10px 0; cursor: pointer; padding: 10px; background: white; border-radius: 8px;">
                                <input type="checkbox" name="priority" value="${domain}" style="margin-right: 10px;" onchange="updatePrioritySelection()">
                                <strong>${domain}</strong> (${score}%)
                            </label>
                        `).join('')}
                    </div>
                    <p><em>S√©lectionnez 1 √† 3 domaines sur lesquels vous voulez vous concentrer en priorit√©.</em></p>
                    <div id="selectedPriorities" style="margin-top: 15px; font-weight: 600; color: #4f46e5;"></div>
                `;
            }
        }

        function updatePrioritySelection() {
            const checkboxes = document.querySelectorAll('input[name="priority"]:checked');
            const selected = Array.from(checkboxes).map(cb => cb.value);
            const display = document.getElementById('selectedPriorities');
            
            if (selected.length > 3) {
                // D√©cocher le dernier s√©lectionn√© si plus de 3
                checkboxes[checkboxes.length - 1].checked = false;
                selected.pop();
            }
            
            if (selected.length > 0) {
                display.innerHTML = `‚úÖ Priorit√©s s√©lectionn√©es : ${selected.join(', ')}`;
            } else {
                display.innerHTML = '';
            }
        }

        function displayActionPlan(scores) {
            const container = document.getElementById('actionPlan');
            
            const recommendations = generateRecommendations(scores);
            
            container.innerHTML = `
                <div class="action-title">üìã Plan d'action personnalis√©</div>
                <div>${recommendations}</div>
            `;
        }

        function generateRecommendations(scores) {
            const lowScores = Object.entries(scores)
                .filter(([_, score]) => score < 60)
                .sort((a, b) => a[1] - b[1]);

            if (lowScores.length === 0) {
                return `
                    <p><strong>Maintien et d√©veloppement :</strong></p>
                    <ul>
                        <li>Continuez √† d√©velopper vos points forts</li>
                        <li>Partagez vos bonnes pratiques avec d'autres jeunes</li>
                        <li>Fixez-vous de nouveaux d√©fis pour progresser encore</li>
                    </ul>
                `;
            }

            const recommendations = {
                "Emploi": "Participez √† des ateliers CV/lettre de motivation, entra√Ænez-vous aux entretiens",
                "Formation": "Rencontrez un conseiller en orientation, explorez les dispositifs de financement",
                "Orientation": "Faites un bilan de comp√©tences, rencontrez des professionnels du secteur",
                "Mobilit√©": "Explorez les solutions de transport, envisagez le permis de conduire",
                "Sant√©": "Consultez un m√©decin, apprenez des techniques de gestion du stress",
                "Logement": "Contactez les services sociaux, explorez les aides au logement",
                "Citoyennet√©": "Participez √† des activit√©s associatives, d√©veloppez votre r√©seau",
                "Finances": "Suivez un atelier gestion de budget, explorez les aides disponibles",
                "Loisirs": "Inscrivez-vous √† des activit√©s, explorez l'offre culturelle locale",
                "Num√©rique": "Suivez une formation informatique, am√©liorez vos comp√©tences digitales",
                "Mode de vie": "Travaillez sur l'organisation personnelle, √©quilibrez vos activit√©s"
            };

            return `
                <p><strong>Actions prioritaires recommand√©es :</strong></p>
                <ol>
                    ${lowScores.slice(0, 3).map(([domain, _]) => 
                        `<li><strong>${domain}</strong> : ${recommendations[domain] || 'Consultez votre conseiller Mission Locale'}</li>`
                    ).join('')}
                </ol>
                <p><em>Contactez votre conseiller Mission Locale pour mettre en place ces actions.</em></p>
            `;
        }

        async function saveResults() {
            if (currentRecordCount >= 999) {
                showInlineMessage('Limite de 999 diagnostics atteinte. Veuillez supprimer d\'anciens diagnostics.', 'error');
                return;
            }

            const saveBtn = document.getElementById('saveBtn');
            const loading = document.getElementById('loading');
            
            saveBtn.disabled = true;
            loading.style.display = 'block';

            try {
                const participantName = document.getElementById('participantName').value;
                
                // Calculer les scores
                const domainScores = {};
                domains.forEach((domain, domainIndex) => {
                    const domainResponses = domain.questions.map((_, qIndex) => 
                        responses[`q_${domainIndex}_${qIndex}`] || 0
                    );
                    const average = domainResponses.reduce((a, b) => a + b, 0) / domainResponses.length;
                    domainScores[domain.name] = Math.round((average / 4) * 100);
                });

                const lifeSkillsScores = {};
                Object.keys(lifeSkillsMapping).forEach(skill => {
                    const relatedDomains = lifeSkillsMapping[skill];
                    const scores = relatedDomains.map(domainName => domainScores[domainName]);
                    const average = scores.reduce((a, b) => a + b, 0) / scores.length;
                    lifeSkillsScores[skill] = Math.round(average);
                });

                const priorityAreas = Object.entries(domainScores)
                    .filter(([_, score]) => score < 60)
                    .map(([domain, _]) => domain);

                const assessmentData = {
                    participant_name: participantName,
                    assessment_date: new Date().toISOString(),
                    domain_scores: JSON.stringify(domainScores),
                    life_skills_scores: JSON.stringify(lifeSkillsScores),
                    priority_areas: JSON.stringify(priorityAreas),
                    action_plan: generateRecommendations(domainScores),
                    completed: true
                };

                if (window.dataSdk) {
                    const result = await window.dataSdk.create(assessmentData);
                    
                    if (result.isOk) {
                        showInlineMessage('Diagnostic sauvegard√© avec succ√®s !', 'success');
                    } else {
                        showInlineMessage('Erreur lors de la sauvegarde. Veuillez r√©essayer.', 'error');
                    }
                }
            } catch (error) {
                showInlineMessage('Erreur lors de la sauvegarde. Veuillez r√©essayer.', 'error');
            } finally {
                saveBtn.disabled = false;
                loading.style.display = 'none';
            }
        }

        function restartAssessment() {
            currentDomain = 0;
            responses = {};
            document.getElementById('participantName').value = '';
            showStep('step-welcome');
        }

        function showStep(stepId) {
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById(stepId).classList.add('active');
        }

        function showInlineMessage(message, type) {
            // Cr√©er un message temporaire
            const messageDiv = document.createElement('div');
            messageDiv.className = 'inline-message';
            
            // Style de base
            let baseStyle = `
                position: fixed;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                box-shadow: 0 10px 20px rgba(0,0,0,0.2);
                text-align: center;
                font-size: 14px;
                animation: slideInDown 0.3s ease-out;
            `;
            
            // Responsive positioning
            if (window.innerWidth <= 768) {
                baseStyle += `
                    top: 10px;
                    left: 10px;
                    right: 10px;
                    max-width: none;
                `;
            } else {
                baseStyle += `
                    top: 20px;
                    right: 20px;
                    max-width: 300px;
                `;
            }
            
            messageDiv.style.cssText = baseStyle;
            
            if (type === 'success') {
                messageDiv.style.background = '#10b981';
            } else if (type === 'error') {
                messageDiv.style.background = '#ef4444';
            } else {
                messageDiv.style.background = '#f59e0b';
            }
            
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            // Animation de sortie
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.style.animation = 'slideOutUp 0.3s ease-in';
                    setTimeout(() => {
                        if (messageDiv.parentNode) {
                            messageDiv.parentNode.removeChild(messageDiv);
                        }
                    }, 300);
                }
            }, 4000);
        }

        function showActivities() {
            // Calculer les scores pour identifier les domaines prioritaires
            const domainScores = {};
            domains.forEach((domain, domainIndex) => {
                const domainResponses = domain.questions.map((_, qIndex) => 
                    responses[`q_${domainIndex}_${qIndex}`] || 0
                );
                const average = domainResponses.reduce((a, b) => a + b, 0) / domainResponses.length;
                domainScores[domain.name] = Math.round((average / 4) * 100);
            });

            // Identifier les domaines prioritaires (score < 60%)
            const priorityDomains = Object.entries(domainScores)
                .filter(([_, score]) => score < 60)
                .sort((a, b) => a[1] - b[1])
                .map(([domain, _]) => domain);

            // Si aucun domaine prioritaire, prendre les 3 plus faibles
            const domainsToShow = priorityDomains.length > 0 
                ? priorityDomains.slice(0, 3)
                : Object.entries(domainScores)
                    .sort((a, b) => a[1] - b[1])
                    .slice(0, 3)
                    .map(([domain, _]) => domain);

            displayActivities(domainsToShow, domainScores);
            showStep('step-activities');
        }

        function displayActivities(priorityDomains, domainScores) {
            const container = document.getElementById('activitiesContainer');
            container.innerHTML = '';

            if (priorityDomains.length === 0) {
                container.innerHTML = `
                    <div class="activity-card">
                        <h3>üéâ Excellent travail !</h3>
                        <p>Vos scores sont tr√®s bons dans tous les domaines. Continuez sur cette voie !</p>
                    </div>
                `;
                return;
            }

            // Ajouter une introduction
            const intro = document.createElement('div');
            intro.className = 'activity-card';
            intro.style.background = '#f0f9ff';
            intro.style.borderLeftColor = '#0ea5e9';
            intro.innerHTML = `
                <h3>üéØ Activit√©s recommand√©es pour vous</h3>
                <p>Bas√©es sur vos r√©sultats, voici des activit√©s pratiques pour d√©velopper vos comp√©tences dans les domaines prioritaires :</p>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
                    ${priorityDomains.map(domain => 
                        `<span class="meta-item" style="background: #dbeafe; color: #1e40af;">
                            ${domain} (${domainScores[domain]}%)
                        </span>`
                    ).join('')}
                </div>
            `;
            container.appendChild(intro);

            // Afficher les activit√©s pour chaque domaine prioritaire
            priorityDomains.forEach(domainName => {
                const activities = domainActivities[domainName];
                if (!activities) return;

                activities.forEach(activity => {
                    const activityCard = document.createElement('div');
                    activityCard.className = 'activity-card';
                    
                    const domainIcon = domains.find(d => d.name === domainName)?.icon || 'üéØ';
                    
                    activityCard.innerHTML = `
                        <div class="activity-header">
                            <div class="activity-icon">${domainIcon}</div>
                            <div>
                                <h3 class="activity-title">${activity.title}</h3>
                                <p class="activity-subtitle">Domaine : ${domainName}</p>
                            </div>
                        </div>

                        <p><strong>Objectif :</strong> ${activity.objective}</p>

                        <div class="skills-tags">
                            ${activity.skills.map(skill => 
                                `<span class="skill-tag">Life Skill : ${skill}</span>`
                            ).join('')}
                        </div>

                        <div class="activity-meta">
                            <div class="meta-item">‚è±Ô∏è ${activity.duration}</div>
                            <div class="meta-item">üë• ${activity.format}</div>
                        </div>

                        <div class="activity-steps">
                            <h4>üìã √âtapes de l'activit√© :</h4>
                            <ul class="step-list">
                                ${activity.steps.map(step => 
                                    `<li class="step-item">${step}</li>`
                                ).join('')}
                            </ul>
                        </div>

                        <div class="transfer-note">
                            <div class="transfer-title">üîÑ Transfert Mission Locale :</div>
                            <p>${activity.transfer}</p>
                        </div>
                    `;
                    
                    container.appendChild(activityCard);
                });
            });

            // Ajouter une note finale
            const finalNote = document.createElement('div');
            finalNote.className = 'activity-card';
            finalNote.style.background = '#f0fdf4';
            finalNote.style.borderLeftColor = '#22c55e';
            finalNote.innerHTML = `
                <h4>üí° Pour aller plus loin</h4>
                <p>Ces activit√©s peuvent √™tre anim√©es par votre conseiller Mission Locale ou en groupe avec d'autres jeunes. N'h√©sitez pas √† demander √† organiser ces ateliers !</p>
                <p><strong>Variante collective :</strong> Certaines activit√©s peuvent √™tre r√©alis√©es en groupe avec affichage anonyme des r√©sultats pour favoriser les √©changes sur les d√©fis communs.</p>
            `;
            container.appendChild(finalNote);
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99ff95476116d347',t:'MTc2MzM4NjIzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
